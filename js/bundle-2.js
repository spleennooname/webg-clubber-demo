!function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return e[n].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var r={};t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){e.exports=r(1)},function(e,t,r){r(2)},function(e,t,r){var n,i;n=[r(3),r(4),r(5),r(6),r(9)],void 0!==(i=function(e,t,n,i,o){"use strict";var a,f,u,s,c,l,d,m=0,p=0,h=Date.now(),g={values:{frame:{caption:"frame time (ms)",over:16.67},fps:{caption:"frame rate (FPS)",below:30}}},v=function(){if(!t.webgl){var e=t.getWebGLErrorMessage();return void document.body.appendChild(e)}var l=r(10);c=new n(g),a=document.getElementById("audio"),a.crossOrigin="anonymous",f=new o({size:2048,thresholdFactor:.25}),f.listen(a),f.update(),s=new i(document.getElementById("canvas"),null,l),u={sub:f.band({from:5,to:32,smooth:[.1,.1,.1,.1]}),low:f.band({from:32,to:48,smooth:[.1,.1,.1,.1]}),mid:f.band({from:48,to:64,smooth:[.1,.1,.1,.1]}),high:f.band({from:64,to:160,smooth:[.1,.1,.1,.1]})},p=y("id")||"75626625",E(),h=Date.now(),w(h)},E=function(e){var t="http://api.soundcloud.com/tracks/"+parseInt(p)+"/stream?client_id=56c4f3443da0d6ce6dcb60ba341c4e8d";a.src=t,a.play()},y=function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)"),r=t.exec(location.search);return null==r?"":decodeURIComponent(r[1].replace(/\+/g," "))},w=function(){if(c("frame").start(),c("rAF").tick(),c("FPS").frame(),requestAnimationFrame(w),d=Date.now(),(l=d-h)>1e3/60){h=d-l%(1e3/60),m+=.015,f.update();var e={iMusicSub:u.sub(m),iMusicLow:u.low(m),iMusicMid:u.mid(m),iMusicHigh:u.high(m)};s.update(m,e)}c("frame").end(),c().update()};e(v)}.apply(t,n))&&(e.exports=i)},function(e,t,r){var n;void 0!==(n=function(){"use strict";function e(e){var t;for(t=0;t<e.length;t+=1)e[t](s)}function t(){var t=c;u&&t.length&&(c=[],e(t))}function r(){u||(u=!0,a&&clearInterval(a),t())}function n(e){return u?e(s):c.push(e),n}var i,o,a,f="undefined"!=typeof window&&window.document,u=!f,s=f?document:null,c=[];if(f){if(document.addEventListener)document.addEventListener("DOMContentLoaded",r,!1),window.addEventListener("load",r,!1);else if(window.attachEvent){window.attachEvent("onload",r),o=document.createElement("div");try{i=null===window.frameElement}catch(e){}o.doScroll&&i&&window.external&&(a=setInterval(function(){try{o.doScroll(),r()}catch(e){}},30))}"complete"===document.readyState&&r()}return n.version="2.0.1",n.load=function(e,t,r,i){i.isBuild?r(null):n(r)},n}.call(t,r,t,e))&&(e.exports=n)},function(e,t,r){var n={canvas:!!window.CanvasRenderingContext2D,webgl:function(){try{var e=document.createElement("canvas");return!(!window.WebGLRenderingContext||!e.getContext("webgl")&&!e.getContext("experimental-webgl"))}catch(e){return!1}}(),workers:!!window.Worker,fileapi:window.File&&window.FileReader&&window.FileList&&window.Blob,getWebGLErrorMessage:function(){var e=document.createElement("div");return e.id="webgl-error-message",e.className="webgl-error",this.webgl||(e.innerHTML=window.WebGLRenderingContext?['Your graphics card does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">WebGL</a>.<br />','Find out how to get it <a href="http://get.webgl.org/" style="color:#000">here</a>.'].join("\n"):['Your browser does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">WebGL</a>.<br/>','Find out how to get it <a href="http://get.webgl.org/" style="color:#000">here</a>.'].join("\n")),e},addGetWebGLMessage:function(e){var t,r,i;e=e||{},t=void 0!==e.parent?e.parent:document.body,r=void 0!==e.id?e.id:"oldie",i=n.getWebGLErrorMessage(),i.id=r,t.appendChild(i)}};e.exports=n},function(e,t,r){"use strict";!function(){if(void 0===window.performance&&(window.performance={}),!window.performance.now){var e=Date.now();performance.timing&&performance.timing.navigationStart&&(e=performance.timing.navigationStart),window.performance.now=function(){return Date.now()-e}}window.performance.mark||(window.performance.mark=function(){}),window.performance.measure||(window.performance.measure=function(){})}(),window.rStats=function(e){function t(e,t){for(var r=Object.keys(e),n=0,i=r.length;n<i;n++)t(r[n])}function r(e){var t=document.createElement("link");t.href=e,t.rel="stylesheet",t.type="text/css",document.getElementsByTagName("head")[0].appendChild(t)}function n(e,t,r){function n(e,t){u+=.1*(e-u),f*=.99,u>f&&(f=u),a.drawImage(o,1,0,o.width-1,o.height,0,0,o.width-1,o.height),t?a.drawImage(d,o.width-1,o.height-u*o.height/f-m):a.drawImage(c,o.width-1,o.height-u*o.height/f-m)}var i=r||{},o=document.createElement("canvas"),a=o.getContext("2d"),f=0,u=0,s=i.color?i.color:"#666666",c=document.createElement("canvas"),l=c.getContext("2d");c.width=1,c.height=2*m,l.fillStyle="#444444",l.fillRect(0,0,1,2*m),l.fillStyle=s,l.fillRect(0,m,1,m),l.fillStyle="#ffffff",l.globalAlpha=.5,l.fillRect(0,m,1,1),l.globalAlpha=1;var d=document.createElement("canvas"),h=d.getContext("2d");return d.width=1,d.height=2*m,h.fillStyle="#444444",h.fillRect(0,0,1,2*m),h.fillStyle="#b70000",h.fillRect(0,m,1,m),h.globalAlpha=.5,h.fillStyle="#ffffff",h.fillRect(0,m,1,1),h.globalAlpha=1,function(){o.width=p,o.height=m,o.style.width=o.width+"px",o.style.height=o.height+"px",o.className="rs-canvas",e.appendChild(o),a.fillStyle="#444444",a.fillRect(0,0,o.width,o.height)}(),{draw:n}}function i(e,r){function n(e){o.drawImage(i,1,0,i.width-1,i.height,0,0,i.width-1,i.height);var r=0;t(e,function(t){var n=e[t]*i.height;o.fillStyle=s[t],o.fillRect(i.width-1,r,1,n),r+=n})}var i=document.createElement("canvas"),o=i.getContext("2d");return function(){i.width=p,i.height=m*r,i.style.width=i.width+"px",i.style.height=i.height+"px",i.className="rs-canvas",e.appendChild(i),o.fillStyle="#444444",o.fillRect(0,0,i.width,i.height)}(),{draw:n}}function o(e,t){function r(e){if(T&&T.average){v+=e,y++;var t=performance.now();t-E>=(T.avgMs||1e3)&&(g=v/y,v=0,E=t,y=0)}}function i(){l=performance.now(),u.userTimingAPI&&performance.mark(m+"-start"),R=!0}function o(){p=performance.now()-l,u.userTimingAPI&&(performance.mark(m+"-end"),R&&performance.measure(m,m+"-start",m+"-end")),r(p)}function a(){o(),i()}function f(){var e=T&&T.average?g:p;_.nodeValue=Math.round(100*e)/100;var t=T&&(T.below&&p<T.below||T.over&&p>T.over);x.draw(p,t),w.className=t?"rs-counter-base alarm":"rs-counter-base"}function s(){var e=performance.now(),t=e-l;h++,t>1e3&&(p=T&&!1===T.interpolate?h:1e3*h/t,h=0,l=e,r(p))}function c(e){p=e,r(p)}var l,m=e,p=0,h=0,g=0,v=0,E=performance.now(),y=0,w=document.createElement("div"),b=document.createElement("span"),A=document.createElement("div"),_=document.createTextNode(""),T=u?u.values[m.toLowerCase()]:null,x=new n(w,m,T),R=!1;return b.className="rs-counter-id",b.textContent=T&&T.caption?T.caption:m,A.className="rs-counter-value",A.appendChild(_),w.appendChild(b),w.appendChild(A),t?t.div.appendChild(w):d.appendChild(w),l=performance.now(),{set:c,start:i,tick:a,end:o,frame:s,value:function(){return p},draw:f}}function a(e){var r=e.toLowerCase();if(void 0===r&&(r="default"),h[r])return h[r];var n=null;u&&u.groups&&t(u.groups,function(e){var t=u.groups[parseInt(e,10)];n||-1===t.values.indexOf(r.toLowerCase())||(n=t)});var i=new o(r,n);return h[r]=i,i}function f(){t(u.plugins,function(e){u.plugins[e].update()}),t(h,function(e){h[e].draw()}),u&&u.fractions&&t(u.fractions,function(e){var r=u.fractions[parseInt(e,10)],n=[],i=h[r.base.toLowerCase()];i&&(i=i.value(),t(u.fractions[e].steps,function(t){var r=u.fractions[e].steps[parseInt(t,10)].toLowerCase(),o=h[r];o&&n.push(o.value()/i)})),r.graph.draw(n)})}var u=e||{},s=u.colours||["#850700","#c74900","#fcb300","#284280","#4c7c0c"],c=(u.CSSPath?u.CSSPath:"")+"rStats.css";(u.css||["https://fonts.googleapis.com/css?family=Roboto+Condensed:400,700,300",c]).forEach(function(e){r(e)}),u.values||(u.values={});var l,d,m=10,p=200,h={};return function(){if(u.plugins){u.values||(u.values={}),u.groups||(u.groups=[]),u.fractions||(u.fractions=[]);for(var e=0;e<u.plugins.length;e++)u.plugins[e].attach(a),t(u.plugins[e].values,function(t){u.values[t]=u.plugins[e].values[t]}),u.groups=u.groups.concat(u.plugins[e].groups),u.fractions=u.fractions.concat(u.plugins[e].fractions)}else u.plugins={};l=document.createElement("div"),l.className="rs-base",d=document.createElement("div"),d.className="rs-container",d.style.height="auto",l.appendChild(d),document.body.appendChild(l),u&&(u.groups&&t(u.groups,function(e){var t=u.groups[parseInt(e,10)],r=document.createElement("div");r.className="rs-group",t.div=r;var n=document.createElement("h1");n.textContent=t.caption,n.addEventListener("click",function(e){this.classList.toggle("hidden"),e.preventDefault()}.bind(r)),d.appendChild(n),d.appendChild(r)}),u.fractions&&t(u.fractions,function(e){var r=u.fractions[parseInt(e,10)],n=document.createElement("div");n.className="rs-fraction";var o=document.createElement("div");o.className="rs-legend";var a=0;t(u.fractions[e].steps,function(t){var r=document.createElement("p");r.textContent=u.fractions[e].steps[t],r.style.color=s[a],o.appendChild(r),a++}),n.appendChild(o),n.style.height=a*m+"px",r.div=n;var f=new i(n,a);r.graph=f,d.appendChild(n)}))}(),function(e){return e?a(e):{element:l,update:f}}},e.exports=window.rStats},function(e,t,r){var n,i;n=[r(7)],void 0!==(i=function(e){"use strict";var t=function(t,r,n){this.renderer=e.getWebGLContext(t),this.renderer.getExtension("OES_standard_derivatives"),this.programInfo=e.createProgramInfo(this.renderer,[r||this.vertexShader,n||this.fragmentShader]);var i={position:[-1,-1,0,1,-1,0,-1,1,0,-1,1,0,1,-1,0,1,1,0]};return this.bufferInfo=e.createBufferInfoFromArrays(this.renderer,i),this.mouse=[0,0],this},r=function(){for(var e,t={},r=0,n=arguments.length;r<n;r++)for(e in arguments[r])arguments[r].hasOwnProperty(e)&&(t[e]=arguments[r][e]);return t};return t.prototype={fragmentShader:["precision mediump float;","varying vec2 vUv;","uniform float iGlobalTime;","uniform vec2 iResolution;","uniform vec4 iMusicLow;","uniform vec4 iMusicMid;","uniform vec4 iMusicHigh;","void main () {"," gl_FragColor.rgb =  mix(iMusicMid.rgb, iMusicHigh.bgr, gl_FragCoord.x/iResolution.x);"," gl_FragColor.a = 1.0;","}"].join("\n"),vertexShader:["precision mediump float;","attribute vec3 position;","varying vec2 vUv;","void main() {","vUv = position.xy * 0.5 + 0.5;","gl_Position = vec4(position.xy,1.0, 1.0 );","}"].join("\n"),update:function(t,n){var i,o,a,f=this.renderer;e.resizeCanvasToDisplaySize(f.canvas),i=f.canvas.width,o=f.canvas.height,f.viewport(0,0,i,o),a={iGlobalTime:t,iResolution:[i,o],iMouse:[0,-.05,0,0]},a=r(a,n),f.useProgram(this.programInfo.program),e.setBuffersAndAttributes(f,this.programInfo,this.bufferInfo),e.setUniforms(this.programInfo,a),e.drawBufferInfo(f,f.TRIANGLES,this.bufferInfo)}},t}.apply(t,n))&&(e.exports=i)},function(e,t,r){var n,i,o;!function(a,f){r(8)&&(i=[],n=f,void 0!==(o="function"==typeof n?n.apply(t,i):n)&&(e.exports=o)),void 0!==e&&e.exports?e.exports=f():a.twgl=f()}(this,function(){var e,t,r;return function(n){function i(e,t){return w.call(e,t)}function o(e,t){var r,n,i,o,a,f,u,s,c,l,d,m=t&&t.split("/"),p=E.map,h=p&&p["*"]||{};if(e&&"."===e.charAt(0))if(t){for(e=e.split("/"),a=e.length-1,E.nodeIdCompat&&A.test(e[a])&&(e[a]=e[a].replace(A,"")),e=m.slice(0,m.length-1).concat(e),c=0;c<e.length;c+=1)if("."===(d=e[c]))e.splice(c,1),c-=1;else if(".."===d){if(1===c&&(".."===e[2]||".."===e[0]))break;c>0&&(e.splice(c-1,2),c-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((m||h)&&p){for(r=e.split("/"),c=r.length;c>0;c-=1){if(n=r.slice(0,c).join("/"),m)for(l=m.length;l>0;l-=1)if((i=p[m.slice(0,l).join("/")])&&(i=i[n])){o=i,f=c;break}if(o)break;!u&&h&&h[n]&&(u=h[n],s=c)}!o&&u&&(o=u,f=s),o&&(r.splice(0,f,o),e=r.join("/"))}return e}function a(e,t){return function(){var r=b.call(arguments,0);return"string"!=typeof r[0]&&1===r.length&&r.push(null),m.apply(n,r.concat([e,t]))}}function f(e){return function(t){return o(t,e)}}function u(e){return function(t){g[e]=t}}function s(e){if(i(v,e)){var t=v[e];delete v[e],y[e]=!0,d.apply(n,t)}if(!i(g,e)&&!i(y,e))throw new Error("No "+e);return g[e]}function c(e){var t,r=e?e.indexOf("!"):-1;return r>-1&&(t=e.substring(0,r),e=e.substring(r+1,e.length)),[t,e]}function l(e){return function(){return E&&E.config&&E.config[e]||{}}}var d,m,p,h,g={},v={},E={},y={},w=Object.prototype.hasOwnProperty,b=[].slice,A=/\.js$/;p=function(e,t){var r,n=c(e),i=n[0];return e=n[1],i&&(i=o(i,t),r=s(i)),i?e=r&&r.normalize?r.normalize(e,f(t)):o(e,t):(e=o(e,t),n=c(e),i=n[0],e=n[1],i&&(r=s(i))),{f:i?i+"!"+e:e,n:e,pr:i,p:r}},h={notrequirebecasebrowserifymessesup:function(e){return a(e)},exports:function(e){var t=g[e];return void 0!==t?t:g[e]={}},module:function(e){return{id:e,uri:"",exports:g[e],config:l(e)}}},d=function(e,t,r,o){var f,c,l,d,m,E,w=[],b=typeof r;if(o=o||e,"undefined"===b||"function"===b){for(t=!t.length&&r.length?["notrequirebecasebrowserifymessesup","exports","module"]:t,m=0;m<t.length;m+=1)if(d=p(t[m],o),"notrequirebecasebrowserifymessesup"===(c=d.f))w[m]=h.notrequirebecasebrowserifymessesup(e);else if("exports"===c)w[m]=h.exports(e),E=!0;else if("module"===c)f=w[m]=h.module(e);else if(i(g,c)||i(v,c)||i(y,c))w[m]=s(c);else{if(!d.p)throw new Error(e+" missing "+c);d.p.load(d.n,a(o,!0),u(c),{}),w[m]=g[c]}l=r?r.apply(g[e],w):void 0,e&&(f&&f.exports!==n&&f.exports!==g[e]?g[e]=f.exports:l===n&&E||(g[e]=l))}else e&&(g[e]=r)},e=t=m=function(e,t,r,i,o){if("string"==typeof e)return h[e]?h[e](t):s(p(e,t).f);if(!e.splice){if(E=e,E.deps&&m(E.deps,E.callback),!t)return;t.splice?(e=t,t=r,r=null):e=n}return t=t||function(){},"function"==typeof r&&(r=i,i=o),i?d(n,e,t,r):setTimeout(function(){d(n,e,t,r)},4),m},m.config=function(e){return m(e)},e._defined=g,r=function(e,t,r){if("string"!=typeof e)throw new Error("See almond README: incorrect module build, no module name");t.splice||(r=t,t=[]),i(g,e)||i(v,e)||(v[e]=[e,t,r])},r.amd={jQuery:!0}}(),r("node_modules/almond/almond.js",function(){}),r("twgl/typedarrays",[],function(){function e(e){if(e instanceof Int8Array)return n;if(e instanceof Uint8Array)return i;if(e instanceof Uint8ClampedArray)return i;if(e instanceof Int16Array)return o;if(e instanceof Uint16Array)return a;if(e instanceof Int32Array)return f;if(e instanceof Uint32Array)return u;if(e instanceof Float32Array)return s;throw"unsupported typed array type"}function t(e){switch(e){case n:return Int8Array;case i:return Uint8Array;case o:return Int16Array;case a:return Uint16Array;case f:return Int32Array;case u:return Uint32Array;case s:return Float32Array;default:throw"unknown gl type"}}function r(e){return e&&e.buffer&&e.buffer instanceof ArrayBuffer}var n=5120,i=5121,o=5122,a=5123,f=5124,u=5125,s=5126;return{getGLTypeForTypedArray:e,getTypedArrayTypeForGLType:t,isArrayBuffer:r}}),r("twgl/utils",[],function(){function e(e){var t={};return Object.keys(e).forEach(function(r){t[r]=e[r]}),t}function t(e,t,r){e.forEach(function(e){var n=t[e];void 0!==n&&(r[e]=n)})}function r(e,t){Object.keys(t).forEach(function(r){t.hasOwnProperty(r)&&e.hasOwnProperty(r)&&(t[r]=e[r])})}function n(e){return parseFloat(e.getParameter(e.VERSION).substr(6))}function i(e){return 0===e.getParameter(e.VERSION).indexOf("WebGL 2.0")}function o(e){var t=n(e);return t<=1&&t>0}return{copyExistingProperties:r,copyNamedProperties:t,shallowCopy:e,isWebGL1:o,isWebGL2:i,error:window.console&&window.console.error&&"function"==typeof window.console.error?window.console.error.bind(window.console):function(){},warn:window.console&&window.console.warn&&"function"==typeof window.console.warn?window.console.warn.bind(window.console):function(){}}}),r("twgl/attributes",["./typedarrays","./utils"],function(e,t){function r(e){E.attribPrefix=e}function n(e){t.copyExistingProperties(e,E)}function i(e,t,r,n,i){e.bindBuffer(t,r),e.bufferData(t,n,i||e.STATIC_DRAW)}function o(e,t,r,n){if(t instanceof WebGLBuffer)return t;r=r||e.ARRAY_BUFFER;var o=e.createBuffer();return i(e,r,o,t,n),o}function a(e){return"indices"===e}function f(e){return e instanceof Int8Array||e instanceof Uint8Array}function u(e){return e.length?e:e.data}function s(e,t){var r;if(r=e.indexOf("coord")>=0?2:e.indexOf("color")>=0?4:3,t%r>0)throw"can not guess numComponents. You should specify it.";return r}function c(e,t){return e.numComponents||e.size||s(t,u(e).length)}function l(t,r){if(e.isArrayBuffer(t))return t;if(e.isArrayBuffer(t.data))return t.data;Array.isArray(t)&&(t={data:t});var n=t.type;return n||(n="indices"===r?Uint16Array:Float32Array),new n(t.data)}function d(t,r){var n={};return Object.keys(r).forEach(function(i){if(!a(i)){var u=r[i],s=u.attrib||u.name||u.attribName||E.attribPrefix+i,d=l(u,i);n[s]={buffer:o(t,d,void 0,u.drawType),numComponents:c(u,i),type:e.getGLTypeForTypedArray(d),normalize:void 0!==u.normalize?u.normalize:f(d),stride:u.stride||0,offset:u.offset||0,drawType:u.drawType}}}),n}function m(e,t,r,n){r=l(r),n?(e.bindBuffer(e.ARRAY_BUFFER,t.buffer),e.bufferSubData(e.ARRAY_BUFFER,n,r)):i(e,e.ARRAY_BUFFER,t.buffer,r,t.drawType)}function p(t,r){var n={attribs:d(t,r)},i=r.indices;return i?(i=l(i,"indices"),n.indices=o(t,i,t.ELEMENT_ARRAY_BUFFER),n.numElements=i.length,n.elementType=e.getGLTypeForTypedArray(i)):n.numElements=y(r),n}function h(e,t,r){var n="indices"===r?e.ELEMENT_ARRAY_BUFFER:e.ARRAY_BUFFER;return o(e,l(t,r),n)}function g(e,t){var r={};return Object.keys(t).forEach(function(n){r[n]=h(e,t[n],n)}),r}function v(e,t,r){var n=e.createVertexArray();return e.bindVertexArray(n),t.length||(t=[t]),t.forEach(function(t){twgl.setBuffersAndAttributes(e,t,r)}),e.bindVertexArray(null),{numElements:r.numElements,elementType:r.elementType,vertexArrayObject:n}}var E={attribPrefix:""},y=function(){var e=["position","positions","a_position"];return function(t){for(var r,n=0;n<e.length&&!((r=e[n])in t);++n);n===e.length&&(r=Object.keys(t)[0]);var i=t[r],o=u(i).length,a=c(i,r),f=o/a;if(o%a>0)throw"numComponents "+a+" not correct for length "+o;return f}}();return{createAttribsFromArrays:d,createBuffersFromArrays:g,createBufferFromArray:h,createBufferFromTypedArray:o,createBufferInfoFromArrays:p,setAttribInfoBufferFromArray:m,createVertexArrayInfo:v,setAttributePrefix:r,setDefaults_:n,getNumComponents_:c,getArray_:u}}),r("twgl/programs",["./utils"],function(e){function t(e,t){return $[t].bindPoint}function r(e,t){return function(r){e.uniform1f(t,r)}}function n(e,t){return function(r){e.uniform1fv(t,r)}}function i(e,t){return function(r){e.uniform2fv(t,r)}}function o(e,t){return function(r){e.uniform3fv(t,r)}}function a(e,t){return function(r){e.uniform4fv(t,r)}}function f(e,t){return function(r){e.uniform1i(t,r)}}function u(e,t){return function(r){e.uniform1iv(t,r)}}function s(e,t){return function(r){e.uniform2iv(t,r)}}function c(e,t){return function(r){e.uniform3iv(t,r)}}function l(e,t){return function(r){e.uniform4iv(t,r)}}function d(e,t){return function(r){e.uniform1ui(t,r)}}function m(e,t){return function(r){e.uniform1uiv(t,r)}}function p(e,t){return function(r){e.uniform2uiv(t,r)}}function h(e,t){return function(r){e.uniform3uiv(t,r)}}function g(e,t){return function(r){e.uniform4uiv(t,r)}}function v(e,t){return function(r){e.uniformMatrix2fv(t,!1,r)}}function E(e,t){return function(r){e.uniformMatrix3fv(t,!1,r)}}function y(e,t){return function(r){e.uniformMatrix4fv(t,!1,r)}}function w(e,t){return function(r){e.uniformMatrix2x3fv(t,!1,r)}}function b(e,t){return function(r){e.uniformMatrix3x2fv(t,!1,r)}}function A(e,t){return function(r){e.uniformMatrix2x4fv(t,!1,r)}}function _(e,t){return function(r){e.uniformMatrix4x2fv(t,!1,r)}}function T(e,t){return function(r){e.uniformMatrix3x4fv(t,!1,r)}}function x(e,t){return function(r){e.uniformMatrix4x3fv(t,!1,r)}}function R(e,r,n,i){var o=t(e,r);return function(t){e.uniform1i(i,n),e.activeTexture(e.TEXTURE0+n),e.bindTexture(o,t)}}function U(e,r,n,i,o){for(var a=t(e,r),f=new Int32Array(o),u=0;u<o;++u)f[u]=n+u;return function(t){e.uniform1iv(i,f),t.forEach(function(t,r){e.activeTexture(e.TEXTURE0+f[r]),e.bindTexture(a,t)})}}function I(e,t){return t=t||0,++t,e.split("\n").map(function(e,r){return r+t+": "+e}).join("\n")}function S(e,t,r,n){var i=n||H,o=e.createShader(r),a=0;if(J.test(t)&&(a=1,t=t.replace(J,"")),e.shaderSource(o,t),e.compileShader(o),!e.getShaderParameter(o,e.COMPILE_STATUS)){var f=e.getShaderInfoLog(o);return i(I(t,a)+"\n*** Error compiling shader: "+f),e.deleteShader(o),null}return o}function P(e,t,r,n,i){"function"==typeof n&&(i=n,n=void 0),"function"==typeof r&&(i=r,r=void 0);var o=i||H,a=e.createProgram();if(t.forEach(function(t){e.attachShader(a,t)}),r&&r.forEach(function(t,r){e.bindAttribLocation(a,n?n[r]:r,t)}),e.linkProgram(a),!e.getProgramParameter(a,e.LINK_STATUS))return o("Error in program linking:"+e.getProgramInfoLog(a)),e.deleteProgram(a),null;return a}function C(e,t,r,n){var i,o="",a=document.getElementById(t);if(!a)throw"*** Error: unknown script element"+t;if(o=a.text,!r)if("x-shader/x-vertex"===a.type)i=e.VERTEX_SHADER;else if("x-shader/x-fragment"===a.type)i=e.FRAGMENT_SHADER;else if(i!==e.VERTEX_SHADER&&i!==e.FRAGMENT_SHADER)throw"*** Error: unknown shader type";return S(e,o,r||i,n)}function F(e,t,r,n,i){for(var o=[],a=0;a<t.length;++a){var f=C(e,t[a],e[ee[a]],i);if(!f)return null;o.push(f)}return P(e,o,r,n,i)}function B(e,t,r,n,i){for(var o=[],a=0;a<t.length;++a){var f=S(e,t[a],e[ee[a]],i);if(!f)return null;o.push(f)}return P(e,o,r,n,i)}function L(e,t){for(var r=0,n={},i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),o=0;o<i;++o){var a=e.getActiveUniform(t,o);if(!a)break;var f=a.name;"[0]"===f.substr(-3)&&(f=f.substr(0,f.length-3));var u=function(t,n){var i=e.getUniformLocation(t,n.name),o=n.size>1&&"[0]"===n.name.substr(-3),a=n.type,f=$[a];if(!f)throw"unknown type: 0x"+a.toString(16);if(f.bindPoint){var u=r;return r+=n.size,o?f.arraySetter(e,a,u,i,n.size):f.setter(e,a,u,i,n.size)}return f.arraySetter&&o?f.arraySetter(e,i):f.setter(e,i)}(t,a);n[f]=u}return n}function M(e,t){for(var r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),n=[],i=[],o=0;o<r;++o){i.push(o),n.push({});var a=e.getActiveUniform(t,o);if(!a)break;n[o].name=a.name}[["UNIFORM_TYPE","type"],["UNIFORM_SIZE","size"],["UNIFORM_BLOCK_INDEX","blockNdx"],["UNIFORM_OFFSET","offset"]].forEach(function(r){var o=r[0],a=r[1];e.getActiveUniforms(t,i,e[o]).forEach(function(e,t){n[t][a]=e})});var f={},u=e.getProgramParameter(t,e.ACTIVE_UNIFORM_BLOCKS);for(o=0;o<u;++o){var s=e.getActiveUniformBlockName(t,o),c={index:o,usedByVertexShader:e.getActiveUniformBlockParameter(t,o,e.UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER),usedByFragmentShader:e.getActiveUniformBlockParameter(t,o,e.UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER),size:e.getActiveUniformBlockParameter(t,o,e.UNIFORM_BLOCK_DATA_SIZE),uniformIndices:e.getActiveUniformBlockParameter(t,o,e.UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES)};c.used=c.usedByVertexSahder||c.usedByFragmentShader,f[s]=c}return{blockSpecs:f,uniformData:n}}function N(e,t,r,n){var i=r.blockSpecs,o=r.uniformData,a=i[n];if(!a)return K("no uniform block object named:",n),{name:n,uniforms:{}};var f=new ArrayBuffer(a.size),u=e.createBuffer(),s=a.index;e.bindBuffer(e.UNIFORM_BUFFER,u),e.uniformBlockBinding(t,a.index,s);var c=n+".";te.test(c)&&(c=c.replace(te,"."));var l={};return a.uniformIndices.forEach(function(e){var t=o[e],r=$[t.type],n=r.Type,i=t.size*r.size,a=t.name;a.substr(0,c.length)===c&&(a=a.substr(c.length)),l[a]=new n(f,t.offset,i/n.BYTES_PER_ELEMENT)}),{name:n,array:f,asFloat:new Float32Array(f),buffer:u,uniforms:l}}function D(e,t,r){return N(e,t.program,t.uniformBlockSpec,r)}function O(e,t,r){var n=t.uniformBlockSpec||t,i=n.blockSpecs[r.name];if(i){var o=i.index;return e.bindBufferRange(e.UNIFORM_BUFFER,o,r.buffer,r.offset||0,r.array.byteLength),!0}return!1}function G(e,t,r){O(e,t,r)&&e.bufferData(e.UNIFORM_BUFFER,r.array,e.DYNAMIC_DRAW)}function z(e,t){var r=e.uniforms;for(var n in t){var i=r[n];if(i){var o=t[n];o.length?i.set(o):i[0]=o}}}function k(e,t){for(var r=e.uniformSetters||e,n=arguments.length,i=1;i<n;++i){var o=arguments[i];if(Array.isArray(o))for(var a=o.length,f=0;f<a;++f)k(r,o[f]);else for(var u in o){var s=r[u];s&&s(o[u])}}}function X(e,t){for(var r={},n=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),i=0;i<n;++i){var o=e.getActiveAttrib(t,i);if(!o)break;var a=e.getAttribLocation(t,o.name),f=Q[o.type];r[o.name]=f?function(t,r){var n=r.size,i=r.count;return function(r){e.bindBuffer(e.ARRAY_BUFFER,r.buffer);for(var o=r.size||r.numComponents||n,a=o/i,f=r.type||e.FLOAT,u=$[f],s=u.size*o,c=r.normalize||!1,l=r.offset||0,d=s/i,m=0;m<i;++m)e.enableVertexAttribArray(t+m),e.vertexAttribPointer(t+m,a,f,c,s,l+d*m)}}(a,f):function(t){return function(r){e.bindBuffer(e.ARRAY_BUFFER,r.buffer),e.enableVertexAttribArray(t),e.vertexAttribPointer(t,r.numComponents||r.size,r.type||e.FLOAT,r.normalize||!1,r.stride||0,r.offset||0)}}(a)}return r}function W(e,t){for(var r in t){var n=e[r];n&&n(t[r])}}function V(e,t,r){r.vertexArrayObject?e.bindVertexArray(r.vertexArrayObject):(W(t.attribSetters||t,r.attribs),r.indices&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,r.indices))}function Y(t,r){var n=L(t,r),i=X(t,r),o={program:r,uniformSetters:n,attribSetters:i};return e.isWebGL2(t)&&(o.uniformBlockSpec=M(t,r)),o}function j(e,t,r,n,i){"function"==typeof n&&(i=n,n=void 0),"function"==typeof r&&(i=r,r=void 0);var o=i||H,a=!0;if(t=t.map(function(e){if(e.indexOf("\n")<0){var t=document.getElementById(e);t?e=t.text:(o("no element with id: "+e),a=!1)}return e}),!a)return null;var f=B(e,t,r,n,i);return f?Y(e,f):null}var H=e.error,K=e.warn,q=34067,Z=35866,$={};$[5126]={Type:Float32Array,size:4,setter:r,arraySetter:n},$[35664]={Type:Float32Array,size:8,setter:i},$[35665]={Type:Float32Array,size:12,setter:o},$[35666]={Type:Float32Array,size:16,setter:a},$[5124]={Type:Int32Array,size:4,setter:f,arraySetter:u},$[35667]={Type:Int32Array,size:8,setter:s},$[35668]={Type:Int32Array,size:12,setter:c},$[35669]={Type:Int32Array,size:16,setter:l},$[5125]={Type:Uint32Array,size:4,setter:d,arraySetter:m},$[36294]={Type:Uint32Array,size:8,setter:p},$[36295]={Type:Uint32Array,size:12,setter:h},$[36296]={Type:Uint32Array,size:16,setter:g},$[35670]={Type:Uint32Array,size:4,setter:f,arraySetter:u},$[35671]={Type:Uint32Array,size:8,setter:s},$[35672]={Type:Uint32Array,size:12,setter:c},$[35673]={Type:Uint32Array,size:16,setter:l},$[35674]={Type:Float32Array,size:16,setter:v},$[35675]={Type:Float32Array,size:36,setter:E},$[35676]={Type:Float32Array,size:64,setter:y},$[35685]={Type:Float32Array,size:24,setter:w},$[35686]={Type:Float32Array,size:32,setter:A},$[35687]={Type:Float32Array,size:24,setter:b},$[35688]={Type:Float32Array,size:48,setter:T},$[35689]={Type:Float32Array,size:32,setter:_},$[35690]={Type:Float32Array,size:48,setter:x},$[35678]={Type:null,size:0,setter:R,arraySetter:U,bindPoint:3553},$[35680]={Type:null,size:0,setter:R,arraySetter:U,bindPoint:q},$[35679]={Type:null,size:0,setter:R,arraySetter:U,bindPoint:32879},$[35682]={Type:null,size:0,setter:R,arraySetter:U,bindPoint:3553},$[36289]={Type:null,size:0,setter:R,arraySetter:U,bindPoint:Z},$[36292]={Type:null,size:0,setter:R,arraySetter:U,bindPoint:Z},$[36293]={Type:null,size:0,setter:R,arraySetter:U,bindPoint:q},$[36298]={Type:null,size:0,setter:R,arraySetter:U,bindPoint:3553},$[36299]={Type:null,size:0,setter:R,arraySetter:U,bindPoint:32879},$[36300]={Type:null,size:0,setter:R,arraySetter:U,bindPoint:q},$[36303]={Type:null,size:0,setter:R,arraySetter:U,bindPoint:Z},$[36306]={Type:null,size:0,setter:R,arraySetter:U,bindPoint:3553},$[36307]={Type:null,size:0,setter:R,arraySetter:U,bindPoint:32879},$[36308]={Type:null,size:0,setter:R,arraySetter:U,bindPoint:q},$[36311]={Type:null,size:0,setter:R,arraySetter:U,bindPoint:Z};var Q={};Q[35674]={size:4,count:2},Q[35675]={size:9,count:3},Q[35676]={size:16,count:4};var J=/^[ \t]*\n/,ee=["VERTEX_SHADER","FRAGMENT_SHADER"],te=/\[\d+\]\.$/;return{createAttributeSetters:X,createProgram:P,createProgramFromScripts:F,createProgramFromSources:B,createProgramInfo:j,createProgramInfoFromProgram:Y,createUniformSetters:L,createUniformBlockSpecFromProgram:M,createUniformBlockInfoFromProgram:N,createUniformBlockInfo:D,setAttributes:W,setBuffersAndAttributes:V,setUniforms:k,setUniformBlock:G,setBlockUniforms:z,bindUniformBlock:O}}),r("twgl/draw",["./programs"],function(e){function t(e,t,r,n,i){var o=r.indices,a=r.elementType,f=void 0===n?r.numElements:n;i=void 0===i?0:i,a||o?e.drawElements(t,f,void 0===a?e.UNSIGNED_SHORT:r.elementType,i):e.drawArrays(t,i,f)}function r(r,n){var i=null,o=null;n.forEach(function(n){if(!1!==n.active){var a=n.programInfo,f=n.vertexArrayInfo||n.bufferInfo,u=!1,s=void 0===n.type?r.TRIANGLES:n.type;a!==i&&(i=a,r.useProgram(a.program),u=!0),(u||f!==o)&&(o&&o.vertexArrayObject&&!f.vertexArrayObject&&r.bindVertexArray(null),o=f,e.setBuffersAndAttributes(r,a,f)),e.setUniforms(a,n.uniforms),t(r,s,f,n.count,n.offset)}}),o.vertexArrayObject&&r.bindVertexArray(null)}return{drawBufferInfo:t,drawObjectList:r}}),r("twgl/textures",["./typedarrays","./utils"],function(e,t){function r(e){R.textureColor=new Uint8Array([255*e[0],255*e[1],255*e[2],255*e[3]])}function n(e){t.copyExistingProperties(e,R),e.textureColor&&r(e.textureColor)}function i(e,t){void 0!==t.colorspaceConversion&&(L.colorspaceConversion=e.getParameter(e.UNPACK_COLORSPACE_CONVERSION_WEBGL),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.colorspaceConversion)),void 0!==t.premultiplyAlpha&&(L.premultiplyAlpha=e.getParameter(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha)),void 0!==t.flipY&&(L.flipY=e.getParameter(e.UNPACK_FLIP_Y_WEBGL),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t.flipY))}function o(e,t){void 0!==t.colorspaceConversion&&e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,L.colorspaceConversion),void 0!==t.premultiplyAlpha&&e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,L.premultiplyAlpha),void 0!==t.flipY&&e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,L.flipY)}function a(e,t,r){var n=r.target||e.TEXTURE_2D;e.bindTexture(n,t),r.min&&e.texParameteri(n,e.TEXTURE_MIN_FILTER,r.min),r.mag&&e.texParameteri(n,e.TEXTURE_MAG_FILTER,r.mag),r.wrap&&(e.texParameteri(n,e.TEXTURE_WRAP_S,r.wrap),e.texParameteri(n,e.TEXTURE_WRAP_T,r.wrap),n===e.TEXTURE_3D&&e.texParameteri(n,e.TEXTURE_WRAP_R,r.wrap)),r.wrapR&&e.texParameteri(n,e.TEXTURE_WRAP_R,r.wrapR),r.wrapS&&e.texParameteri(n,e.TEXTURE_WRAP_S,r.wrapS),r.wrapT&&e.texParameteri(n,e.TEXTURE_WRAP_T,r.wrapT),r.minLod&&e.texParameteri(n,e.TEXTURE_MIN_LOD,r.minLod),r.maxLod&&e.texParameteri(n,e.TEXTURE_MAX_LOD,r.maxLod),r.baseLevel&&e.texParameteri(n,e.TEXTURE_BASE_LEVEL,r.baseLevel),r.maxLevel&&e.texParameteri(n,e.TEXTURE_MAX_LEVEL,r.maxLevel)}function f(e){return e=e||R.textureColor,U(e)?e:new Uint8Array([255*e[0],255*e[1],255*e[2],255*e[3]])}function u(e){return 0==(e&e-1)}function s(e,t,r,n,i){r=r||R.textureOptions;var o=r.target||e.TEXTURE_2D;n=n||r.width,i=i||r.height,e.bindTexture(o,t),u(n)&&u(i)?e.generateMipmap(o):(e.texParameteri(o,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(o,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(o,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE))}function c(e,t){return t=t||{},t.cubeFaceOrder||[e.TEXTURE_CUBE_MAP_POSITIVE_X,e.TEXTURE_CUBE_MAP_NEGATIVE_X,e.TEXTURE_CUBE_MAP_POSITIVE_Y,e.TEXTURE_CUBE_MAP_NEGATIVE_Y,e.TEXTURE_CUBE_MAP_POSITIVE_Z,e.TEXTURE_CUBE_MAP_NEGATIVE_Z]}function l(e,t){var r=c(e,t),n=r.map(function(e,t){return{face:e,ndx:t}});return n.sort(function(e,t){return e.face-t.face}),n}function d(){}function m(e,r,n){function i(){f.removeEventListener("error",o),f.removeEventListener("load",a),f=null}function o(){var r="couldn't load image: "+e;t.error(r),n(r,f),i()}function a(){n(null,f),i()}n=n||d;var f=new Image;return r=void 0!==r?r:R.crossOrigin,void 0!==r&&(f.crossOrigin=r),f.addEventListener("error",o),f.addEventListener("load",a),f.src=e,f}function p(e,t,r){r=r||R.textureOptions;var n=r.target||e.TEXTURE_2D;if(e.bindTexture(n,t),!1!==r.color){var i=f(r.color)
;if(n===e.TEXTURE_CUBE_MAP)for(var o=0;o<6;++o)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+o,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,i);else n===e.TEXTURE_3D?e.texImage3D(n,0,e.RGBA,1,1,1,0,e.RGBA,e.UNSIGNED_BYTE,i):e.texImage2D(n,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,i)}}function h(e,r,n,i){return i=i||d,n=n||R.textureOptions,p(e,r,n),n=t.shallowCopy(n),m(n.src,n.crossOrigin,function(t,o){t?i(t,r,o):(M(e,r,o,n),i(null,r,o))})}function g(e,r,n,a){function f(t){return function(f,u){--v,f?E.push(f):u.width!==u.height?E.push("cubemap face img is not a square: "+u.src):(i(e,n),e.bindTexture(h,r),5===v?c(e).forEach(function(t){e.texImage2D(t,0,s,s,l,u)}):e.texImage2D(t,0,s,s,l,u),o(e,n),e.generateMipmap(h)),0===v&&a(E.length?E:void 0,g,r)}}a=a||d;var u=n.src;if(6!==u.length)throw"there must be 6 urls for a cubemap";var s=n.format||e.RGBA,l=n.type||e.UNSIGNED_BYTE,h=n.target||e.TEXTURE_2D;if(h!==e.TEXTURE_CUBE_MAP)throw"target must be TEXTURE_CUBE_MAP";p(e,r,n),n=t.shallowCopy(n);var g,v=6,E=[],y=c(e,n);g=u.map(function(e,t){return m(e,n.crossOrigin,f(y[t]))})}function v(e){switch(e){case I:case C:return 1;case F:return 2;case S:return 3;case P:return 4;default:throw"unknown type: "+e}}function E(t,r){return U(r)?e.getGLTypeForTypedArray(r):t.UNSIGNED_BYTE}function y(e,t,r,n,i){if(i%1!=0)throw"can't guess dimensions";if(r||n){if(n){if(!r&&(r=i/n)%1)throw"can't guess dimensions"}else if((n=i/r)%1)throw"can't guess dimensions"}else{var o=Math.sqrt(i/(t===e.TEXTURE_CUBE_MAP?6:1));o%1==0?(r=o,n=o):(r=i,n=1)}return{width:r,height:n}}function w(t,r,n,a){a=a||R.textureOptions;var f=a.target||t.TEXTURE_2D;t.bindTexture(f,r);var u=a.width,s=a.height,c=a.depth,d=a.format||t.RGBA,m=a.internalFormat||d,p=a.type||E(t,n),h=v(d),g=n.length/h;if(g%1)throw"length wrong size for format: "+B(t,d);var w;if(f===t.TEXTURE_3D)if(u||s||c)!u||s&&c?!s||u&&c?(w=y(t,f,u,s,g/c),u=w.width,s=w.height):(w=y(t,f,u,c,g/s),u=w.width,c=w.height):(w=y(t,f,s,c,g/u),s=w.width,c=w.height);else{var b=Math.cbrt(g);if(b%1!=0)throw"can't guess cube size of array of numElements: "+g;u=b,s=b,c=b}else w=y(t,f,u,s,g),u=w.width,s=w.height;if(U(n))n instanceof Uint8ClampedArray&&(n=new Uint8Array(n.buffer));else{var A=e.getTypedArrayTypeForGLType(p);n=new A(n)}if(t.pixelStorei(t.UNPACK_ALIGNMENT,a.unpackAlignment||1),i(t,a),f===t.TEXTURE_CUBE_MAP){var _=g/6*h;l(t,a).forEach(function(e){var r=_*e.ndx,i=n.subarray(r,r+_);t.texImage2D(e.face,0,m,u,s,0,d,p,i)})}else f===t.TEXTURE_3D?t.texImage3D(f,0,m,u,s,c,0,d,p,n):t.texImage2D(f,0,m,u,s,0,d,p,n);return o(t,a),{width:u,height:s,depth:c}}function b(e,t,r){var n=r.target||e.TEXTURE_2D;e.bindTexture(n,t);var a=r.format||e.RGBA,f=r.internalFormat||a,u=r.type||e.UNSIGNED_BYTE;if(i(e,r),n===e.TEXTURE_CUBE_MAP)for(var s=0;s<6;++s)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+s,0,f,r.width,r.height,0,a,u,null);else n===e.TEXTURE_3D?e.texImage3D(n,0,f,r.width,r.height,r.depth,0,a,u,null):e.texImage2D(n,0,f,r.width,r.height,0,a,u,null);o(e,r)}function A(e,t,r){r=r||d,t=t||R.textureOptions;var n=e.createTexture(),i=t.target||e.TEXTURE_2D,o=t.width||1,f=t.height||1;e.bindTexture(i,n),i===e.TEXTURE_CUBE_MAP&&(e.texParameteri(i,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(i,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE));var u=t.src;if(u)if("function"==typeof u&&(u=u(e,t)),"string"==typeof u)h(e,n,t,r);else if(U(u)||Array.isArray(u)&&("number"==typeof u[0]||Array.isArray(u[0])||U(u[0]))){var c=w(e,n,u,t);o=c.width,f=c.height}else if(Array.isArray(u)&&"string"==typeof u[0])g(e,n,t,r);else{if(!(u instanceof HTMLElement))throw"unsupported src type";M(e,n,u,t),o=u.width,f=u.height}else b(e,n,t);return!1!==t.auto&&s(e,n,t,o,f),a(e,n,t),n}function _(e,t,r,n,i){n=n||r.width,i=i||r.height;var o=r.target||e.TEXTURE_2D;e.bindTexture(o,t);var a,f=r.format||e.RGBA,u=r.src;if(a=u&&(U(u)||Array.isArray(u)&&"number"==typeof u[0])?r.type||E(e,u):r.type||e.UNSIGNED_BYTE,o===e.TEXTURE_CUBE_MAP)for(var s=0;s<6;++s)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+s,0,f,n,i,0,f,a,null);else e.texImage2D(o,0,f,n,i,0,f,a,null)}function T(e){return"string"==typeof e||Array.isArray(e)&&"string"==typeof e[0]}function x(e,t,r){function n(){0===i&&setTimeout(function(){r(o.length?o:void 0,a,f)},0)}r=r||d;var i=0,o=[],a={},f={};return Object.keys(t).forEach(function(r){var u,s=t[r];T(s.src)&&(u=function(e,t,a){f[r]=a,--i,e&&o.push(e),n()},++i),a[r]=A(e,s,u)}),n(),a}var R={textureColor:new Uint8Array([128,192,255,255]),textureOptions:{},crossOrigin:void 0},U=e.isArrayBuffer,I=6406,S=6407,P=6408,C=6409,F=6410,B=function(){function e(e){t||(t={},Object.keys(e).forEach(function(r){"number"==typeof e[r]&&(t[e[r]]=r)}))}var t;return function(r,n){return e(),t[n]||"0x"+n.toString(16)}}(),L={},M=function(){var e=document.createElement("canvas").getContext("2d");return function(t,r,n,f){f=f||R.textureOptions;var u=f.target||t.TEXTURE_2D,c=n.width,d=n.height,m=f.format||t.RGBA,p=f.internalFormat||m,h=f.type||t.UNSIGNED_BYTE;if(i(t,f),t.bindTexture(u,r),u===t.TEXTURE_CUBE_MAP){var g,v,E=n.width,y=n.height;if(E/6===y)g=y,v=[0,0,1,0,2,0,3,0,4,0,5,0];else if(y/6===E)g=E,v=[0,0,0,1,0,2,0,3,0,4,0,5];else if(E/3==y/2)g=E/3,v=[0,0,1,0,2,0,0,1,1,1,2,1];else{if(E/2!=y/3)throw"can't figure out cube map from element: "+(n.src?n.src:n.nodeName);g=E/2,v=[0,0,1,0,0,1,1,1,0,2,1,2]}e.canvas.width=g,e.canvas.height=g,c=g,d=g,l(t,f).forEach(function(r){var i=v[2*r.ndx+0]*g,o=v[2*r.ndx+1]*g;e.drawImage(n,i,o,g,g,0,0,g,g),t.texImage2D(r.face,0,p,m,h,e.canvas)}),e.canvas.width=1,e.canvas.height=1}else if(u===t.TEXTURE_3D){var w=Math.min(n.width,n.height),b=Math.max(n.width,n.height),A=b/w;if(A%1!=0)throw"can not compute 3D dimensions of element";var _=n.width===b?1:0,T=n.height===b?1:0;t.texImage3D(u,0,p,w,w,w,0,m,h,null),e.canvas.width=w,e.canvas.height=w;for(var x=0;x<A;++x){var U=x*w*_,I=x*w*T,S=w,P=w,C=w,F=w;e.drawImage(n,U,I,S,P,0,0,C,F),t.texSubImage3D(u,0,0,0,x,m,h,e.canvas)}e.canvas.width=0,e.canvas.height=0}else t.texImage2D(u,0,p,m,h,n);o(t,f),!1!==f.auto&&s(t,r,f,c,d),a(t,r,f)}}();return{setDefaults_:n,createTexture:A,setEmptyTexture:b,setTextureFromArray:w,loadTextureFromUrl:h,setTextureFromElement:M,setTextureFilteringForSize:s,setTextureParameters:a,setDefaultTextureColor:r,createTextures:x,resizeTexture:_,getNumComponentsForFormat:v}}),r("twgl/framebuffers",["./textures","./utils"],function(e,t){function r(e){return c[e]}function n(e){return l[e]}function i(i,o,a,f){var c=i.FRAMEBUFFER,l=i.createFramebuffer();i.bindFramebuffer(c,l),a=a||i.drawingBufferWidth,f=f||i.drawingBufferHeight,o=o||s;var d=0,m={framebuffer:l,attachments:[],width:a,height:f};return o.forEach(function(o){var s=o.attachment,l=o.format,p=r(l);if(p||(p=u+d++),!s)if(n(l))s=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,s),i.renderbufferStorage(i.RENDERBUFFER,l,a,f);else{var h=t.shallowCopy(o);h.width=a,h.height=f,void 0===h.auto&&(h.auto=!1,h.min=h.min||i.LINEAR,h.mag=h.mag||i.LINEAR,h.wrapS=h.wrapS||h.wrap||i.CLAMP_TO_EDGE,h.wrapT=h.wrapT||h.wrap||i.CLAMP_TO_EDGE),s=e.createTexture(i,h)}if(s instanceof WebGLRenderbuffer)i.framebufferRenderbuffer(c,p,i.RENDERBUFFER,s);else{if(!(s instanceof WebGLTexture))throw"unknown attachment type";i.framebufferTexture2D(c,p,o.texTarget||i.TEXTURE_2D,s,o.level||0)}m.attachments.push(s)}),m}function o(t,r,n,i,o){i=i||t.drawingBufferWidth,o=o||t.drawingBufferHeight,r.width=i,r.height=o,n=n||s,n.forEach(function(n,a){var f=r.attachments[a],u=n.format;if(f instanceof WebGLRenderbuffer)t.bindRenderbuffer(t.RENDERBUFFER,f),t.renderbufferStorage(t.RENDERBUFFER,u,i,o);else{if(!(f instanceof WebGLTexture))throw"unknown attachment type";e.resizeTexture(t,f,n,i,o)}})}function a(e,t,r){r=r||e.FRAMEBUFFER,t?(e.bindFramebuffer(r,t.framebuffer),e.viewport(0,0,t.width,t.height)):(e.bindFramebuffer(r,null),e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight))}var f=34041,u=36064,s=[{format:6408,type:5121,min:9729,wrap:33071},{format:f}],c={};c[f]=33306,c[6401]=36128,c[36168]=36128,c[6402]=36096,c[33189]=36096;var l={};return l[32854]=!0,l[32855]=!0,l[36194]=!0,l[f]=!0,l[33189]=!0,l[6401]=!0,l[36168]=!0,{bindFramebufferInfo:a,createFramebufferInfo:i,resizeFramebufferInfo:o}}),r("twgl/twgl",["./attributes","./draw","./framebuffers","./programs","./textures","./typedarrays","./utils"],function(e,t,r,n,i,o,a){function f(t){a.copyExistingProperties(t,g),e.setDefaults_(t),i.setDefaults_(t)}function u(e){if(e&&g.enableVertexArrayObjects&&a.isWebGL1(e)){var t=e.getExtension("OES_vertex_array_object");t&&(e.createVertexArray=function(){return t.createVertexArrayOES()},e.deleteVertexArray=function(e){t.deleteVertexArrayOES(e)},e.isVertexArray=function(e){return t.isVertexArrayOES(e)},e.bindVertexArray=function(e){t.bindVertexArrayOES(e)},e.VERTEX_ARRAY_BINDING=t.VERTEX_ARRAY_BINDING_OES)}}function s(e,t){for(var r=["webgl","experimental-webgl"],n=null,i=0;i<r.length;++i){try{n=e.getContext(r[i],t)}catch(e){}if(n)break}return n}function c(e,t){var r=s(e,t);return u(r),r}function l(e,t){for(var r=["webgl2","experimental-webgl2","webgl","experimental-webgl"],n=null,i=0;i<r.length;++i){try{n=e.getContext(r[i],t)}catch(e){}if(n)break}return n}function d(e,t){var r=l(e,t);return u(r),r}function m(e,t){t=t||1,t=Math.max(1,t);var r=e.clientWidth*t|0,n=e.clientHeight*t|0;return(e.width!==r||e.height!==n)&&(e.width=r,e.height=n,!0)}function p(e){return"_"!==e[e.length-1]}function h(e,t){return Object.keys(e).filter(p).forEach(function(r){t[r]=e[r]}),t}var g={enableVertexArrayObjects:!0},v={getContext:d,getWebGLContext:c,isWebGL1:a.isWebGL1,isWebGL2:a.isWebGL2,resizeCanvasToDisplaySize:m,setDefaults:f},E={attributes:e,draw:t,framebuffers:r,programs:n,textures:i,typedArrays:o};return Object.keys(E).forEach(function(e){var t=E[e];h(t,v),v[e]=h(t,{})}),v}),r("main",["twgl/twgl"],function(e){return e}),t(["main"],function(e){return e},void 0,!0),r("build/js/twgl-includer",function(){}),t("main")})},function(e,t){(function(t){e.exports=t}).call(t,{})},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[],void 0!==(__WEBPACK_AMD_DEFINE_RESULT__=function(){"use strict";var Clubber=function(config){function freq2midi(freq){for(var r=1.05946309436,lala=523.251,notetest=eval(freq),ref=523.251,hauteur=1,octave=4,alteration,supinf=0,compteur=0,hautnb=1,noteton,ref1=0,ref2=0,temp,flag=0,nmidi=72,tableau=new Array;notetest<ref;)ref=Math.floor(1e3*ref/r)/1e3,compteur+=1,supinf=-1,flag=1,ref1=ref;for(;notetest>ref;)ref=Math.floor(1e3*ref*r)/1e3,compteur-=1,supinf=1,ref2=ref;for(Math.abs(notetest-ref1)<Math.abs(notetest-ref2)?(supinf=-1,compteur+=1):1==flag&&(supinf=-1),0==ref1&&(ref1=Math.floor(1e3*ref/r)/1e3,Math.abs(notetest-ref1)<Math.abs(notetest-ref2)&&(compteur+=1,supinf=1)),compteur=Math.abs(compteur);0!=compteur;)(1==hautnb&&-1==supinf||12==hautnb&&1==supinf)&&(octave+=eval(supinf),1==supinf&&(hautnb=0),-1==supinf&&(hautnb=13)),hautnb+=supinf,nmidi+=supinf,compteur-=1;return nmidi}config||(config={}),this.audioCtx=new(window.AudioContext||window.webkitAudioContext),this.analyser=this.audioCtx.createAnalyser(),this.analyser.fftSize=config.size||2048,this.bufferLength=this.analyser.frequencyBinCount,this.thresholdFactor=config.thresholdFactor||.66,config.mute||this.analyser.connect(this.audioCtx.destination),this.data=new Uint8Array(this.bufferLength),this.keys=new Uint8Array(this.bufferLength),this.notes=new Uint16Array(160),this.thresholds=new Uint8Array(160),this.weights=new Uint8Array(160);for(var i=0,inc=this.audioCtx.sampleRate/2/this.bufferLength;i<this.bufferLength;i++){var freq=(i+.5)*inc,key=freq2midi(freq);this.keys[i]=key,this.weights[key]++}this.count=0};return Clubber.prototype.listen=function(e){this.el=e,this.source&&this.source.disconnect(this.analyser),this.source=this.audioCtx.createMediaElementSource(e),this.source.connect(this.analyser)},Clubber.prototype.band=function(e){var t={from:1,to:128,snap:.66,smooth:[.33,.33,.33,.33],step:1e3/60};if(e)for(var r in t)e[r]||(e[r]=t[r]);else e=t;var n={count:0,scope:this,config:e,data:new Float32Array(4)};return function(e){function t(e,t,r){return e=e||0,r=Math.min(r,n.config.snap),r<0&&(r=e>t?Math.abs(n.config.snap):-r),r*e+(1-r)*t}if(e)for(var r in n.config)void 0!==e[r]&&(n.config[r]=e[r]);if(e=n.config,n.time>n.scope.time)return n.data;for(var i=e.smooth,o=n.data,a=-1,f=0,u=0,s=0,c=0,l=0,d=e.from;d<e.to;d++){var m=n.scope.notes[d];m>n.scope.thresholds[d]&&(s+=m-128,c+=d%12,u+=d,l++,m>f&&(a=d,f=m))}void 0===n.time&&(n.time=n.scope.time);for(var p=n.time,h=n.config.step,g=n.scope.time+h;p<=g;p+=h)o[0]=t(a%12/12,o[0],i[0]),o[1]=t((l?c/l:0)/12,o[1],i[1]),o[2]=t(((l?u/l:0)-e.from)/(e.to-e.from),o[2],i[2]),o[3]=t((l?s/l:0)/128,o[3],i[3]);return n.time=p,n.count=n.scope.count,o}},Clubber.prototype.update=function(e,t){this.cache;t||(this.analyser.getByteFrequencyData(this.data),t=t);for(var r=0;r<this.notes.length;r++)this.notes[r]=0;for(r=0;r<this.keys.length;r++)this.notes[this.keys[r]]+=this.data[r];for(r=0;r<this.notes.length;r++){this.notes[r]/=this.weights[r];var n=this.thresholdFactor;this.thresholds[r]=128+Math.max(Math.min(1,Math.max(n,0))*Math.max(0,this.notes[r]-128),this.thresholds[r]),this.thresholds[r]>128&&this.thresholds[r]--}this.time=void 0!==e?parseFloat(e):window.performance.now(),this.count++},Clubber}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__))&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},function(e,t){e.exports="// by Andrea Bovo, spleennooname / 2016\n// Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License.\n\n#ifdef GL_ES\nprecision mediump float;\n#endif\n\nvarying vec2 vUv;\n\nuniform float iGlobalTime;\nuniform vec2 iResolution;\n\nuniform vec4 iMusicSub;\nuniform vec4 iMusicLow;\nuniform vec4 iMusicMid;\nuniform vec4 iMusicHigh;\n\n//\n\n#define time iGlobalTime\n#define resolution iResolution.xy\n\n#define N_WAVES 5\n#define GREY 220./255.\n\n//noise\nfloat rand(float n){\n    return fract(sin(n) * 43758.5453123);\n}\n\nfloat noise(float p){\n    float fl = floor(p);\n    float fc = fract(p);\n    return mix(rand(fl), rand(fl + 1.0), fc);\n}\n\nfloat gauss(float s, float x){\n    return (0.85)*exp(-x*x/(2.*s*s));\n}\n\nfloat blur(float dist, float width, float blur, float intens){\n    dist = max( abs(dist)-width, 0.);\n    float b = gauss(0.02 + width *10.*blur, dist);\n    return b*intens;\n}\n\nfloat d2y2(float d, float i){\n    float b = 0.75*i+0.0001;\n    return blur(d , 0.005, b, 0.45);\n}\n\nfloat f(float x){\n    return blur(0.5*x, 0.03, 0.04+0.5, 1.);\n}\n\nfloat wave(float x, int i, vec4 sub, vec4 low, vec4 mid, vec4 high){\n\n\t//0 the note where the highest energy was seen,\n\t//1 the average note for the whole band,\n\t//2 the octave (bass vs treble) and\n\t//3 the average energy of all triggered notes.\n\n    float i_f = float(i);\n\n    float y = ( mix(0., +.75,  high[1]*.75 + high[0] + mid[0]) - .25*i_f )*sin( x*1.45  + .55*time- i_f * mix(-.5, +.5, sub[1] + mid[0] + low[0] + high[3]) );\n\n    return y;\n}\n\nvoid main(void) {\n\n    vec2 uv = (gl_FragCoord.xy / resolution - vec2(0.5)) * vec2(resolution.x / resolution.y, 1.0);\n\n    uv.y *= 1.5;\n    uv.x *= 1.75;\n\n    vec3 col = vec3(0.);\n\n    for(int i = 0; i<N_WAVES; ++i){\n\n        float i_f = float(i)*0.5 + 1.;\n\n\n        float y = d2y2( distance( 2.*uv.y, wave(uv.x, i, iMusicSub, iMusicLow, iMusicMid, iMusicHigh) ), i_f );\n        col += y;\n\n    }\n\n    gl_FragColor = vec4( GREY - col, 1.0);\n}\n"}]);