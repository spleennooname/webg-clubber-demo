!function(e){function r(n){if(t[n])return t[n].exports;var i=t[n]={exports:{},id:n,loaded:!1};return e[n].call(i.exports,i,i.exports,r),i.loaded=!0,i.exports}var t={};return r.m=e,r.c=t,r.p="",r(0)}([function(e,r,t){e.exports=t(1)},function(e,r,t){t(2)},function(e,r,t){var n,i;n=[t(3),t(4),t(5),t(6),t(9)],i=function(e,r,n,i,o){"use strict";var a,f,u,s,c,l,d,m="75626625",p=0,h=0,g=Date.now(),v=60,E=1e3/v,y={values:{frame:{caption:"frame time (ms)",over:16.67},fps:{caption:"frame rate (FPS)",below:30}}},w=function(){if(!r.webgl){var e=r.getWebGLErrorMessage();return void document.body.appendChild(e)}var l=t(10),d=null;c=new n(y),a=document.getElementById("audio"),a.crossOrigin="anonymous",f=new o({size:2048,thresholdFactor:.25}),f.listen(a),f.update(),s=new i(document.getElementById("canvas"),d,l),u={sub:f.band({from:5,to:32,smooth:[.1,.1,.1,.1]}),low:f.band({from:32,to:48,smooth:[.1,.1,.1,.1]}),mid:f.band({from:48,to:64,smooth:[.1,.1,.1,.1]}),high:f.band({from:64,to:160,smooth:[.1,.1,.1,.1]})},h=A("id")||m,b(),g=Date.now(),_(g)},b=function(e){var r="http://api.soundcloud.com/tracks/"+parseInt(h)+"/stream?client_id=56c4f3443da0d6ce6dcb60ba341c4e8d";a.src=r,a.play()},A=function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var r=new RegExp("[\\?&]"+e+"=([^&#]*)"),t=r.exec(location.search);return null==t?"":decodeURIComponent(t[1].replace(/\+/g," "))},_=function(){if(c("frame").start(),c("rAF").tick(),c("FPS").frame(),requestAnimationFrame(_),d=Date.now(),l=d-g,l>E){g=d-l%E,p+=.015,f.update();var e={iMusicSub:u.sub(p),iMusicLow:u.low(p),iMusicMid:u.mid(p),iMusicHigh:u.high(p)};s.update(p,e)}c("frame").end(),c().update()};e(w)}.apply(r,n),!(void 0!==i&&(e.exports=i))},function(e,r,t){var n;n=function(){"use strict";function e(e){var r;for(r=0;r<e.length;r+=1)e[r](s)}function r(){var r=c;u&&r.length&&(c=[],e(r))}function t(){u||(u=!0,a&&clearInterval(a),r())}function n(e){return u?e(s):c.push(e),n}var i,o,a,f="undefined"!=typeof window&&window.document,u=!f,s=f?document:null,c=[];if(f){if(document.addEventListener)document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1);else if(window.attachEvent){window.attachEvent("onload",t),o=document.createElement("div");try{i=null===window.frameElement}catch(e){}o.doScroll&&i&&window.external&&(a=setInterval(function(){try{o.doScroll(),t()}catch(e){}},30))}"complete"===document.readyState&&t()}return n.version="2.0.1",n.load=function(e,r,t,i){i.isBuild?t(null):n(t)},n}.call(r,t,r,e),!(void 0!==n&&(e.exports=n))},function(e,r,t){var n={canvas:!!window.CanvasRenderingContext2D,webgl:function(){try{var e=document.createElement("canvas");return!(!window.WebGLRenderingContext||!e.getContext("webgl")&&!e.getContext("experimental-webgl"))}catch(e){return!1}}(),workers:!!window.Worker,fileapi:window.File&&window.FileReader&&window.FileList&&window.Blob,getWebGLErrorMessage:function(){var e=document.createElement("div");return e.id="webgl-error-message",e.className="webgl-error",this.webgl||(e.innerHTML=window.WebGLRenderingContext?['Your graphics card does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">WebGL</a>.<br />','Find out how to get it <a href="http://get.webgl.org/" style="color:#000">here</a>.'].join("\n"):['Your browser does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">WebGL</a>.<br/>','Find out how to get it <a href="http://get.webgl.org/" style="color:#000">here</a>.'].join("\n")),e},addGetWebGLMessage:function(e){var r,t,i;e=e||{},r=void 0!==e.parent?e.parent:document.body,t=void 0!==e.id?e.id:"oldie",i=n.getWebGLErrorMessage(),i.id=t,r.appendChild(i)}};e.exports=n},function(e,r,t){"use strict";!function(){if("undefined"==typeof window.performance&&(window.performance={}),!window.performance.now){var e=Date.now();performance.timing&&performance.timing.navigationStart&&(e=performance.timing.navigationStart),window.performance.now=function(){return Date.now()-e}}window.performance.mark||(window.performance.mark=function(){}),window.performance.measure||(window.performance.measure=function(){})}(),window.rStats=function(e){function r(e,r){for(var t=Object.keys(e),n=0,i=t.length;n<i;n++)r(t[n])}function t(e){var r=document.createElement("link");r.href=e,r.rel="stylesheet",r.type="text/css",document.getElementsByTagName("head")[0].appendChild(r)}function n(e,r,t){function n(){a.width=v,a.height=g,a.style.width=a.width+"px",a.style.height=a.height+"px",a.className="rs-canvas",e.appendChild(a),f.fillStyle="#444444",f.fillRect(0,0,a.width,a.height)}function i(e,r){s+=.1*(e-s),u*=.99,s>u&&(u=s),f.drawImage(a,1,0,a.width-1,a.height,0,0,a.width-1,a.height),r?f.drawImage(m,a.width-1,a.height-s*a.height/u-g):f.drawImage(l,a.width-1,a.height-s*a.height/u-g)}var o=t||{},a=document.createElement("canvas"),f=a.getContext("2d"),u=0,s=0,c=o.color?o.color:"#666666",l=document.createElement("canvas"),d=l.getContext("2d");l.width=1,l.height=2*g,d.fillStyle="#444444",d.fillRect(0,0,1,2*g),d.fillStyle=c,d.fillRect(0,g,1,g),d.fillStyle="#ffffff",d.globalAlpha=.5,d.fillRect(0,g,1,1),d.globalAlpha=1;var m=document.createElement("canvas"),p=m.getContext("2d");return m.width=1,m.height=2*g,p.fillStyle="#444444",p.fillRect(0,0,1,2*g),p.fillStyle="#b70000",p.fillRect(0,g,1,g),p.globalAlpha=.5,p.fillStyle="#ffffff",p.fillRect(0,g,1,1),p.globalAlpha=1,n(),{draw:i}}function i(e,t){function n(){o.width=v,o.height=g*t,o.style.width=o.width+"px",o.style.height=o.height+"px",o.className="rs-canvas",e.appendChild(o),a.fillStyle="#444444",a.fillRect(0,0,o.width,o.height)}function i(e){a.drawImage(o,1,0,o.width-1,o.height,0,0,o.width-1,o.height);var t=0;r(e,function(r){var n=e[r]*o.height;a.fillStyle=c[r],a.fillRect(o.width-1,t,1,n),t+=n})}var o=document.createElement("canvas"),a=o.getContext("2d");return n(),{draw:i}}function o(e,r){function t(e){if(T&&T.average){v+=e,y++;var r=performance.now();r-E>=(T.avgMs||1e3)&&(g=v/y,v=0,E=r,y=0)}}function i(){l=performance.now(),s.userTimingAPI&&performance.mark(d+"-start"),R=!0}function o(){m=performance.now()-l,s.userTimingAPI&&(performance.mark(d+"-end"),R&&performance.measure(d,d+"-start",d+"-end")),t(m)}function a(){o(),i()}function f(){var e=T&&T.average?g:m;_.nodeValue=Math.round(100*e)/100;var r=T&&(T.below&&m<T.below||T.over&&m>T.over);x.draw(m,r),w.className=r?"rs-counter-base alarm":"rs-counter-base"}function u(){var e=performance.now(),r=e-l;p++,r>1e3&&(m=T&&T.interpolate===!1?p:1e3*p/r,p=0,l=e,t(m))}function c(e){m=e,t(m)}var l,d=e,m=0,p=0,g=0,v=0,E=performance.now(),y=0,w=document.createElement("div"),b=document.createElement("span"),A=document.createElement("div"),_=document.createTextNode(""),T=s?s.values[d.toLowerCase()]:null,x=new n(w,d,T),R=!1;return b.className="rs-counter-id",b.textContent=T&&T.caption?T.caption:d,A.className="rs-counter-value",A.appendChild(_),w.appendChild(b),w.appendChild(A),r?r.div.appendChild(w):h.appendChild(w),l=performance.now(),{set:c,start:i,tick:a,end:o,frame:u,value:function(){return m},draw:f}}function a(e){var t=e.toLowerCase();if(void 0===t&&(t="default"),E[t])return E[t];var n=null;s&&s.groups&&r(s.groups,function(e){var r=s.groups[parseInt(e,10)];n||r.values.indexOf(t.toLowerCase())===-1||(n=r)});var i=new o(t,n);return E[t]=i,i}function f(){if(s.plugins){s.values||(s.values={}),s.groups||(s.groups=[]),s.fractions||(s.fractions=[]);for(var e=0;e<s.plugins.length;e++)s.plugins[e].attach(a),r(s.plugins[e].values,function(r){s.values[r]=s.plugins[e].values[r]}),s.groups=s.groups.concat(s.plugins[e].groups),s.fractions=s.fractions.concat(s.plugins[e].fractions)}else s.plugins={};p=document.createElement("div"),p.className="rs-base",h=document.createElement("div"),h.className="rs-container",h.style.height="auto",p.appendChild(h),document.body.appendChild(p),s&&(s.groups&&r(s.groups,function(e){var r=s.groups[parseInt(e,10)],t=document.createElement("div");t.className="rs-group",r.div=t;var n=document.createElement("h1");n.textContent=r.caption,n.addEventListener("click",function(e){this.classList.toggle("hidden"),e.preventDefault()}.bind(t)),h.appendChild(n),h.appendChild(t)}),s.fractions&&r(s.fractions,function(e){var t=s.fractions[parseInt(e,10)],n=document.createElement("div");n.className="rs-fraction";var o=document.createElement("div");o.className="rs-legend";var a=0;r(s.fractions[e].steps,function(r){var t=document.createElement("p");t.textContent=s.fractions[e].steps[r],t.style.color=c[a],o.appendChild(t),a++}),n.appendChild(o),n.style.height=a*g+"px",t.div=n;var f=new i(n,a);t.graph=f,h.appendChild(n)}))}function u(){r(s.plugins,function(e){s.plugins[e].update()}),r(E,function(e){E[e].draw()}),s&&s.fractions&&r(s.fractions,function(e){var t=s.fractions[parseInt(e,10)],n=[],i=E[t.base.toLowerCase()];i&&(i=i.value(),r(s.fractions[e].steps,function(r){var t=s.fractions[e].steps[parseInt(r,10)].toLowerCase(),o=E[t];o&&n.push(o.value()/i)})),t.graph.draw(n)})}var s=e||{},c=s.colours||["#850700","#c74900","#fcb300","#284280","#4c7c0c"],l="https://fonts.googleapis.com/css?family=Roboto+Condensed:400,700,300",d=(s.CSSPath?s.CSSPath:"")+"rStats.css",m=s.css||[l,d];m.forEach(function(e){t(e)}),s.values||(s.values={});var p,h,g=10,v=200,E={};return f(),function(e){return e?a(e):{element:p,update:u}}},e.exports=window.rStats},function(e,r,t){var n,i;n=[t(7)],i=function(e){"use strict";var r=function(r,t,n){this.renderer=e.getWebGLContext(r),this.renderer.getExtension("OES_standard_derivatives"),this.programInfo=e.createProgramInfo(this.renderer,[t?t:this.vertexShader,n?n:this.fragmentShader]);var i={position:[-1,-1,0,1,-1,0,-1,1,0,-1,1,0,1,-1,0,1,1,0]};return this.bufferInfo=e.createBufferInfoFromArrays(this.renderer,i),this.mouse=[0,0],this},t=function(){for(var e,r={},t=0,n=arguments.length;t<n;t++)for(e in arguments[t])arguments[t].hasOwnProperty(e)&&(r[e]=arguments[t][e]);return r};return r.prototype={fragmentShader:["precision mediump float;","varying vec2 vUv;","uniform float iGlobalTime;","uniform vec2 iResolution;","uniform vec4 iMusicLow;","uniform vec4 iMusicMid;","uniform vec4 iMusicHigh;","void main () {"," gl_FragColor.rgb =  mix(iMusicMid.rgb, iMusicHigh.bgr, gl_FragCoord.x/iResolution.x);"," gl_FragColor.a = 1.0;","}"].join("\n"),vertexShader:["precision mediump float;","attribute vec3 position;","varying vec2 vUv;","void main() {","vUv = position.xy * 0.5 + 0.5;","gl_Position = vec4(position.xy,1.0, 1.0 );","}"].join("\n"),update:function(r,n){var i,o,a,f=this.renderer;e.resizeCanvasToDisplaySize(f.canvas),i=f.canvas.width,o=f.canvas.height,f.viewport(0,0,i,o),a={iGlobalTime:r,iResolution:[i,o],iMouse:[0,-.05,0,0]},a=t(a,n),f.useProgram(this.programInfo.program),e.setBuffersAndAttributes(f,this.programInfo,this.bufferInfo),e.setUniforms(this.programInfo,a),e.drawBufferInfo(f,f.TRIANGLES,this.bufferInfo)}},r}.apply(r,n),!(void 0!==i&&(e.exports=i))},function(e,r,t){var n,i,o;!function(a,f){t(8)&&(i=[],n=f,o="function"==typeof n?n.apply(r,i):n,!(void 0!==o&&(e.exports=o))),"undefined"!=typeof e&&e.exports?e.exports=f():a.twgl=f()}(this,function(){var e,r,t;return function(n){function i(e,r){return w.call(e,r)}function o(e,r){var t,n,i,o,a,f,u,s,c,l,d,m=r&&r.split("/"),p=E.map,h=p&&p["*"]||{};if(e&&"."===e.charAt(0))if(r){for(e=e.split("/"),a=e.length-1,E.nodeIdCompat&&A.test(e[a])&&(e[a]=e[a].replace(A,"")),e=m.slice(0,m.length-1).concat(e),c=0;c<e.length;c+=1)if(d=e[c],"."===d)e.splice(c,1),c-=1;else if(".."===d){if(1===c&&(".."===e[2]||".."===e[0]))break;c>0&&(e.splice(c-1,2),c-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((m||h)&&p){for(t=e.split("/"),c=t.length;c>0;c-=1){if(n=t.slice(0,c).join("/"),m)for(l=m.length;l>0;l-=1)if(i=p[m.slice(0,l).join("/")],i&&(i=i[n])){o=i,f=c;break}if(o)break;!u&&h&&h[n]&&(u=h[n],s=c)}!o&&u&&(o=u,f=s),o&&(t.splice(0,f,o),e=t.join("/"))}return e}function a(e,r){return function(){var t=b.call(arguments,0);return"string"!=typeof t[0]&&1===t.length&&t.push(null),m.apply(n,t.concat([e,r]))}}function f(e){return function(r){return o(r,e)}}function u(e){return function(r){g[e]=r}}function s(e){if(i(v,e)){var r=v[e];delete v[e],y[e]=!0,d.apply(n,r)}if(!i(g,e)&&!i(y,e))throw new Error("No "+e);return g[e]}function c(e){var r,t=e?e.indexOf("!"):-1;return t>-1&&(r=e.substring(0,t),e=e.substring(t+1,e.length)),[r,e]}function l(e){return function(){return E&&E.config&&E.config[e]||{}}}var d,m,p,h,g={},v={},E={},y={},w=Object.prototype.hasOwnProperty,b=[].slice,A=/\.js$/;p=function(e,r){var t,n=c(e),i=n[0];return e=n[1],i&&(i=o(i,r),t=s(i)),i?e=t&&t.normalize?t.normalize(e,f(r)):o(e,r):(e=o(e,r),n=c(e),i=n[0],e=n[1],i&&(t=s(i))),{f:i?i+"!"+e:e,n:e,pr:i,p:t}},h={notrequirebecasebrowserifymessesup:function(e){return a(e)},exports:function(e){var r=g[e];return"undefined"!=typeof r?r:g[e]={}},module:function(e){return{id:e,uri:"",exports:g[e],config:l(e)}}},d=function(e,r,t,o){var f,c,l,d,m,E,w=[],b=typeof t;if(o=o||e,"undefined"===b||"function"===b){for(r=!r.length&&t.length?["notrequirebecasebrowserifymessesup","exports","module"]:r,m=0;m<r.length;m+=1)if(d=p(r[m],o),c=d.f,"notrequirebecasebrowserifymessesup"===c)w[m]=h.notrequirebecasebrowserifymessesup(e);else if("exports"===c)w[m]=h.exports(e),E=!0;else if("module"===c)f=w[m]=h.module(e);else if(i(g,c)||i(v,c)||i(y,c))w[m]=s(c);else{if(!d.p)throw new Error(e+" missing "+c);d.p.load(d.n,a(o,!0),u(c),{}),w[m]=g[c]}l=t?t.apply(g[e],w):void 0,e&&(f&&f.exports!==n&&f.exports!==g[e]?g[e]=f.exports:l===n&&E||(g[e]=l))}else e&&(g[e]=t)},e=r=m=function(e,r,t,i,o){if("string"==typeof e)return h[e]?h[e](r):s(p(e,r).f);if(!e.splice){if(E=e,E.deps&&m(E.deps,E.callback),!r)return;r.splice?(e=r,r=t,t=null):e=n}return r=r||function(){},"function"==typeof t&&(t=i,i=o),i?d(n,e,r,t):setTimeout(function(){d(n,e,r,t)},4),m},m.config=function(e){return m(e)},e._defined=g,t=function(e,r,t){if("string"!=typeof e)throw new Error("See almond README: incorrect module build, no module name");r.splice||(t=r,r=[]),i(g,e)||i(v,e)||(v[e]=[e,r,t])},t.amd={jQuery:!0}}(),t("node_modules/almond/almond.js",function(){}),t("twgl/typedarrays",[],function(){function e(e){if(e instanceof Int8Array)return n;if(e instanceof Uint8Array)return i;if(e instanceof Uint8ClampedArray)return i;if(e instanceof Int16Array)return o;if(e instanceof Uint16Array)return a;if(e instanceof Int32Array)return f;if(e instanceof Uint32Array)return u;if(e instanceof Float32Array)return s;throw"unsupported typed array type"}function r(e){switch(e){case n:return Int8Array;case i:return Uint8Array;case o:return Int16Array;case a:return Uint16Array;case f:return Int32Array;case u:return Uint32Array;case s:return Float32Array;default:throw"unknown gl type"}}function t(e){return e&&e.buffer&&e.buffer instanceof ArrayBuffer}var n=5120,i=5121,o=5122,a=5123,f=5124,u=5125,s=5126;return{getGLTypeForTypedArray:e,getTypedArrayTypeForGLType:r,isArrayBuffer:t}}),t("twgl/utils",[],function(){function e(e){var r={};return Object.keys(e).forEach(function(t){r[t]=e[t]}),r}function r(e,r,t){e.forEach(function(e){var n=r[e];void 0!==n&&(t[e]=n)})}function t(e,r){Object.keys(r).forEach(function(t){r.hasOwnProperty(t)&&e.hasOwnProperty(t)&&(r[t]=e[t])})}function n(e){return parseFloat(e.getParameter(e.VERSION).substr(6))}function i(e){return 0===e.getParameter(e.VERSION).indexOf("WebGL 2.0")}function o(e){var r=n(e);return r<=1&&r>0}var a=window.console&&window.console.error&&"function"==typeof window.console.error?window.console.error.bind(window.console):function(){},f=window.console&&window.console.warn&&"function"==typeof window.console.warn?window.console.warn.bind(window.console):function(){};return{copyExistingProperties:t,copyNamedProperties:r,shallowCopy:e,isWebGL1:o,isWebGL2:i,error:a,warn:f}}),t("twgl/attributes",["./typedarrays","./utils"],function(e,r){function t(e){E.attribPrefix=e}function n(e){r.copyExistingProperties(e,E)}function i(e,r,t,n,i){e.bindBuffer(r,t),e.bufferData(r,n,i||e.STATIC_DRAW)}function o(e,r,t,n){if(r instanceof WebGLBuffer)return r;t=t||e.ARRAY_BUFFER;var o=e.createBuffer();return i(e,t,o,r,n),o}function a(e){return"indices"===e}function f(e){return e instanceof Int8Array||e instanceof Uint8Array}function u(e){return e.length?e:e.data}function s(e,r){var t;if(t=e.indexOf("coord")>=0?2:e.indexOf("color")>=0?4:3,r%t>0)throw"can not guess numComponents. You should specify it.";return t}function c(e,r){return e.numComponents||e.size||s(r,u(e).length)}function l(r,t){if(e.isArrayBuffer(r))return r;if(e.isArrayBuffer(r.data))return r.data;Array.isArray(r)&&(r={data:r});var n=r.type;return n||(n="indices"===t?Uint16Array:Float32Array),new n(r.data)}function d(r,t){var n={};return Object.keys(t).forEach(function(i){if(!a(i)){var u=t[i],s=u.attrib||u.name||u.attribName||E.attribPrefix+i,d=l(u,i);n[s]={buffer:o(r,d,void 0,u.drawType),numComponents:c(u,i),type:e.getGLTypeForTypedArray(d),normalize:void 0!==u.normalize?u.normalize:f(d),stride:u.stride||0,offset:u.offset||0,drawType:u.drawType}}}),n}function m(e,r,t,n){t=l(t),n?(e.bindBuffer(e.ARRAY_BUFFER,r.buffer),e.bufferSubData(e.ARRAY_BUFFER,n,t)):i(e,e.ARRAY_BUFFER,r.buffer,t,r.drawType)}function p(r,t){var n={attribs:d(r,t)},i=t.indices;return i?(i=l(i,"indices"),n.indices=o(r,i,r.ELEMENT_ARRAY_BUFFER),n.numElements=i.length,n.elementType=e.getGLTypeForTypedArray(i)):n.numElements=y(t),n}function h(e,r,t){var n="indices"===t?e.ELEMENT_ARRAY_BUFFER:e.ARRAY_BUFFER,i=l(r,t);return o(e,i,n)}function g(e,r){var t={};return Object.keys(r).forEach(function(n){t[n]=h(e,r[n],n)}),t}function v(e,r,t){var n=e.createVertexArray();return e.bindVertexArray(n),r.length||(r=[r]),r.forEach(function(r){twgl.setBuffersAndAttributes(e,r,t)}),e.bindVertexArray(null),{numElements:t.numElements,elementType:t.elementType,vertexArrayObject:n}}var E={attribPrefix:""},y=function(){var e=["position","positions","a_position"];return function(r){for(var t,n=0;n<e.length&&(t=e[n],!(t in r));++n);n===e.length&&(t=Object.keys(r)[0]);var i=r[t],o=u(i).length,a=c(i,t),f=o/a;if(o%a>0)throw"numComponents "+a+" not correct for length "+o;return f}}();return{createAttribsFromArrays:d,createBuffersFromArrays:g,createBufferFromArray:h,createBufferFromTypedArray:o,createBufferInfoFromArrays:p,setAttribInfoBufferFromArray:m,createVertexArrayInfo:v,setAttributePrefix:t,setDefaults_:n,getNumComponents_:c,getArray_:u}}),t("twgl/programs",["./utils"],function(e){function r(e,r){return Ge[r].bindPoint}function t(e,r){return function(t){e.uniform1f(r,t)}}function n(e,r){return function(t){e.uniform1fv(r,t)}}function i(e,r){return function(t){e.uniform2fv(r,t)}}function o(e,r){return function(t){e.uniform3fv(r,t)}}function a(e,r){return function(t){e.uniform4fv(r,t)}}function f(e,r){return function(t){e.uniform1i(r,t)}}function u(e,r){return function(t){e.uniform1iv(r,t)}}function s(e,r){return function(t){e.uniform2iv(r,t)}}function c(e,r){return function(t){e.uniform3iv(r,t)}}function l(e,r){return function(t){e.uniform4iv(r,t)}}function d(e,r){return function(t){e.uniform1ui(r,t)}}function m(e,r){return function(t){e.uniform1uiv(r,t)}}function p(e,r){return function(t){e.uniform2uiv(r,t)}}function h(e,r){return function(t){e.uniform3uiv(r,t)}}function g(e,r){return function(t){e.uniform4uiv(r,t)}}function v(e,r){return function(t){e.uniformMatrix2fv(r,!1,t)}}function E(e,r){return function(t){e.uniformMatrix3fv(r,!1,t)}}function y(e,r){return function(t){e.uniformMatrix4fv(r,!1,t)}}function w(e,r){return function(t){e.uniformMatrix2x3fv(r,!1,t)}}function b(e,r){return function(t){e.uniformMatrix3x2fv(r,!1,t)}}function A(e,r){return function(t){e.uniformMatrix2x4fv(r,!1,t)}}function _(e,r){return function(t){e.uniformMatrix4x2fv(r,!1,t)}}function T(e,r){return function(t){e.uniformMatrix3x4fv(r,!1,t)}}function x(e,r){return function(t){e.uniformMatrix4x3fv(r,!1,t)}}function R(e,t,n,i){var o=r(e,t);return function(r){e.uniform1i(i,n),e.activeTexture(e.TEXTURE0+n),e.bindTexture(o,r)}}function U(e,t,n,i,o){for(var a=r(e,t),f=new Int32Array(o),u=0;u<o;++u)f[u]=n+u;return function(r){e.uniform1iv(i,f),r.forEach(function(r,t){e.activeTexture(e.TEXTURE0+f[t]),e.bindTexture(a,r)})}}function I(e,r){return r=r||0,++r,e.split("\n").map(function(e,t){return t+r+": "+e}).join("\n")}function S(e,r,t,n){var i=n||K,o=e.createShader(t),a=0;ke.test(r)&&(a=1,r=r.replace(ke,"")),e.shaderSource(o,r),e.compileShader(o);var f=e.getShaderParameter(o,e.COMPILE_STATUS);if(!f){var u=e.getShaderInfoLog(o);return i(I(r,a)+"\n*** Error compiling shader: "+u),e.deleteShader(o),null}return o}function P(e,r,t,n,i){"function"==typeof n&&(i=n,n=void 0),"function"==typeof t&&(i=t,t=void 0);var o=i||K,a=e.createProgram();r.forEach(function(r){e.attachShader(a,r)}),t&&t.forEach(function(r,t){e.bindAttribLocation(a,n?n[t]:t,r)}),e.linkProgram(a);var f=e.getProgramParameter(a,e.LINK_STATUS);if(!f){var u=e.getProgramInfoLog(a);return o("Error in program linking:"+u),e.deleteProgram(a),null}return a}function C(e,r,t,n){var i,o="",a=document.getElementById(r);if(!a)throw"*** Error: unknown script element"+r;if(o=a.text,!t)if("x-shader/x-vertex"===a.type)i=e.VERTEX_SHADER;else if("x-shader/x-fragment"===a.type)i=e.FRAGMENT_SHADER;else if(i!==e.VERTEX_SHADER&&i!==e.FRAGMENT_SHADER)throw"*** Error: unknown shader type";return S(e,o,t?t:i,n)}function F(e,r,t,n,i){for(var o=[],a=0;a<r.length;++a){var f=C(e,r[a],e[Xe[a]],i);if(!f)return null;o.push(f)}return P(e,o,t,n,i)}function B(e,r,t,n,i){for(var o=[],a=0;a<r.length;++a){var f=S(e,r[a],e[Xe[a]],i);if(!f)return null;o.push(f)}return P(e,o,t,n,i)}function L(e,r){function t(r,t){var i=e.getUniformLocation(r,t.name),o=t.size>1&&"[0]"===t.name.substr(-3),a=t.type,f=Ge[a];if(!f)throw"unknown type: 0x"+a.toString(16);if(f.bindPoint){var u=n;return n+=t.size,o?f.arraySetter(e,a,u,i,t.size):f.setter(e,a,u,i,t.size)}return f.arraySetter&&o?f.arraySetter(e,i):f.setter(e,i)}for(var n=0,i={},o=e.getProgramParameter(r,e.ACTIVE_UNIFORMS),a=0;a<o;++a){var f=e.getActiveUniform(r,a);if(!f)break;var u=f.name;"[0]"===u.substr(-3)&&(u=u.substr(0,u.length-3));var s=t(r,f);i[u]=s}return i}function M(e,r){for(var t=e.getProgramParameter(r,e.ACTIVE_UNIFORMS),n=[],i=[],o=0;o<t;++o){i.push(o),n.push({});var a=e.getActiveUniform(r,o);if(!a)break;n[o].name=a.name}[["UNIFORM_TYPE","type"],["UNIFORM_SIZE","size"],["UNIFORM_BLOCK_INDEX","blockNdx"],["UNIFORM_OFFSET","offset"]].forEach(function(t){var o=t[0],a=t[1];e.getActiveUniforms(r,i,e[o]).forEach(function(e,r){n[r][a]=e})});var f={},u=e.getProgramParameter(r,e.ACTIVE_UNIFORM_BLOCKS);for(o=0;o<u;++o){var s=e.getActiveUniformBlockName(r,o),c={index:o,usedByVertexShader:e.getActiveUniformBlockParameter(r,o,e.UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER),usedByFragmentShader:e.getActiveUniformBlockParameter(r,o,e.UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER),size:e.getActiveUniformBlockParameter(r,o,e.UNIFORM_BLOCK_DATA_SIZE),uniformIndices:e.getActiveUniformBlockParameter(r,o,e.UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES)};c.used=c.usedByVertexSahder||c.usedByFragmentShader,f[s]=c}return{blockSpecs:f,uniformData:n}}function N(e,r,t,n){var i=t.blockSpecs,o=t.uniformData,a=i[n];if(!a)return H("no uniform block object named:",n),{name:n,uniforms:{}};var f=new ArrayBuffer(a.size),u=e.createBuffer(),s=a.index;e.bindBuffer(e.UNIFORM_BUFFER,u),e.uniformBlockBinding(r,a.index,s);var c=n+".";We.test(c)&&(c=c.replace(We,"."));var l={};return a.uniformIndices.forEach(function(e){var r=o[e],t=Ge[r.type],n=t.Type,i=r.size*t.size,a=r.name;a.substr(0,c.length)===c&&(a=a.substr(c.length)),l[a]=new n(f,r.offset,i/n.BYTES_PER_ELEMENT)}),{name:n,array:f,asFloat:new Float32Array(f),buffer:u,uniforms:l}}function D(e,r,t){return N(e,r.program,r.uniformBlockSpec,t)}function O(e,r,t){var n=r.uniformBlockSpec||r,i=n.blockSpecs[t.name];if(i){var o=i.index;return e.bindBufferRange(e.UNIFORM_BUFFER,o,t.buffer,t.offset||0,t.array.byteLength),!0}return!1}function G(e,r,t){O(e,r,t)&&e.bufferData(e.UNIFORM_BUFFER,t.array,e.DYNAMIC_DRAW)}function z(e,r){var t=e.uniforms;for(var n in r){var i=t[n];if(i){var o=r[n];o.length?i.set(o):i[0]=o}}}function k(e,r){for(var t=e.uniformSetters||e,n=arguments.length,i=1;i<n;++i){var o=arguments[i];if(Array.isArray(o))for(var a=o.length,f=0;f<a;++f)k(t,o[f]);else for(var u in o){var s=t[u];s&&s(o[u])}}}function X(e,r){function t(r){return function(t){e.bindBuffer(e.ARRAY_BUFFER,t.buffer),e.enableVertexAttribArray(r),e.vertexAttribPointer(r,t.numComponents||t.size,t.type||e.FLOAT,t.normalize||!1,t.stride||0,t.offset||0)}}function n(r,t){var n=t.size,i=t.count;return function(t){e.bindBuffer(e.ARRAY_BUFFER,t.buffer);for(var o=t.size||t.numComponents||n,a=o/i,f=t.type||e.FLOAT,u=Ge[f],s=u.size*o,c=t.normalize||!1,l=t.offset||0,d=s/i,m=0;m<i;++m)e.enableVertexAttribArray(r+m),e.vertexAttribPointer(r+m,a,f,c,s,l+d*m)}}for(var i={},o=e.getProgramParameter(r,e.ACTIVE_ATTRIBUTES),a=0;a<o;++a){var f=e.getActiveAttrib(r,a);if(!f)break;var u=e.getAttribLocation(r,f.name),s=ze[f.type];s?i[f.name]=n(u,s):i[f.name]=t(u)}return i}function W(e,r){for(var t in r){var n=e[t];n&&n(r[t])}}function V(e,r,t){t.vertexArrayObject?e.bindVertexArray(t.vertexArrayObject):(W(r.attribSetters||r,t.attribs),t.indices&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t.indices))}function Y(r,t){var n=L(r,t),i=X(r,t),o={program:t,uniformSetters:n,attribSetters:i};return e.isWebGL2(r)&&(o.uniformBlockSpec=M(r,t)),o}function j(e,r,t,n,i){"function"==typeof n&&(i=n,n=void 0),"function"==typeof t&&(i=t,t=void 0);var o=i||K,a=!0;if(r=r.map(function(e){if(e.indexOf("\n")<0){var r=document.getElementById(e);r?e=r.text:(o("no element with id: "+e),a=!1)}return e}),!a)return null;var f=B(e,r,t,n,i);return f?Y(e,f):null}var K=e.error,H=e.warn,q=5126,Z=35664,$=35665,Q=35666,J=5124,ee=35667,re=35668,te=35669,ne=35670,ie=35671,oe=35672,ae=35673,fe=35674,ue=35675,se=35676,ce=35678,le=35680,de=35679,me=35682,pe=35685,he=35686,ge=35687,ve=35688,Ee=35689,ye=35690,we=36289,be=36292,Ae=36293,_e=5125,Te=36294,xe=36295,Re=36296,Ue=36298,Ie=36299,Se=36300,Pe=36303,Ce=36306,Fe=36307,Be=36308,Le=36311,Me=3553,Ne=34067,De=32879,Oe=35866,Ge={};Ge[q]={Type:Float32Array,size:4,setter:t,arraySetter:n},Ge[Z]={Type:Float32Array,size:8,setter:i},Ge[$]={Type:Float32Array,size:12,setter:o},Ge[Q]={Type:Float32Array,size:16,setter:a},Ge[J]={Type:Int32Array,size:4,setter:f,arraySetter:u},Ge[ee]={Type:Int32Array,size:8,setter:s},Ge[re]={Type:Int32Array,size:12,setter:c},Ge[te]={Type:Int32Array,size:16,setter:l},Ge[_e]={Type:Uint32Array,size:4,setter:d,arraySetter:m},Ge[Te]={Type:Uint32Array,size:8,setter:p},Ge[xe]={Type:Uint32Array,size:12,setter:h},Ge[Re]={Type:Uint32Array,size:16,setter:g},Ge[ne]={Type:Uint32Array,size:4,setter:f,arraySetter:u},Ge[ie]={Type:Uint32Array,size:8,setter:s},Ge[oe]={Type:Uint32Array,size:12,setter:c},Ge[ae]={Type:Uint32Array,size:16,setter:l},Ge[fe]={Type:Float32Array,size:16,setter:v},Ge[ue]={Type:Float32Array,size:36,setter:E},Ge[se]={Type:Float32Array,size:64,setter:y},Ge[pe]={Type:Float32Array,size:24,setter:w},Ge[he]={Type:Float32Array,size:32,setter:A},Ge[ge]={Type:Float32Array,size:24,setter:b},Ge[ve]={Type:Float32Array,size:48,setter:T},Ge[Ee]={Type:Float32Array,size:32,setter:_},Ge[ye]={Type:Float32Array,size:48,setter:x},Ge[ce]={Type:null,size:0,setter:R,arraySetter:U,bindPoint:Me},Ge[le]={Type:null,size:0,setter:R,arraySetter:U,bindPoint:Ne},Ge[de]={Type:null,size:0,setter:R,arraySetter:U,bindPoint:De},Ge[me]={Type:null,size:0,setter:R,arraySetter:U,bindPoint:Me},Ge[we]={Type:null,size:0,setter:R,arraySetter:U,bindPoint:Oe},Ge[be]={Type:null,size:0,setter:R,arraySetter:U,bindPoint:Oe},Ge[Ae]={Type:null,size:0,setter:R,arraySetter:U,bindPoint:Ne},Ge[Ue]={Type:null,size:0,setter:R,arraySetter:U,bindPoint:Me},Ge[Ie]={Type:null,size:0,setter:R,arraySetter:U,bindPoint:De},Ge[Se]={Type:null,size:0,setter:R,arraySetter:U,bindPoint:Ne},Ge[Pe]={Type:null,size:0,setter:R,arraySetter:U,bindPoint:Oe},Ge[Ce]={Type:null,size:0,setter:R,arraySetter:U,bindPoint:Me},Ge[Fe]={Type:null,size:0,setter:R,arraySetter:U,bindPoint:De},Ge[Be]={Type:null,size:0,setter:R,arraySetter:U,bindPoint:Ne},Ge[Le]={Type:null,size:0,setter:R,arraySetter:U,bindPoint:Oe};var ze={};ze[fe]={size:4,count:2},ze[ue]={size:9,count:3},ze[se]={size:16,count:4};var ke=/^[ \t]*\n/,Xe=["VERTEX_SHADER","FRAGMENT_SHADER"],We=/\[\d+\]\.$/;return{createAttributeSetters:X,createProgram:P,createProgramFromScripts:F,createProgramFromSources:B,createProgramInfo:j,createProgramInfoFromProgram:Y,createUniformSetters:L,createUniformBlockSpecFromProgram:M,createUniformBlockInfoFromProgram:N,createUniformBlockInfo:D,setAttributes:W,setBuffersAndAttributes:V,setUniforms:k,setUniformBlock:G,setBlockUniforms:z,bindUniformBlock:O}}),t("twgl/draw",["./programs"],function(e){function r(e,r,t,n,i){var o=t.indices,a=t.elementType,f=void 0===n?t.numElements:n;i=void 0===i?0:i,a||o?e.drawElements(r,f,void 0===a?e.UNSIGNED_SHORT:t.elementType,i):e.drawArrays(r,i,f)}function t(t,n){var i=null,o=null;n.forEach(function(n){if(n.active!==!1){var a=n.programInfo,f=n.vertexArrayInfo||n.bufferInfo,u=!1,s=void 0===n.type?t.TRIANGLES:n.type;a!==i&&(i=a,t.useProgram(a.program),u=!0),(u||f!==o)&&(o&&o.vertexArrayObject&&!f.vertexArrayObject&&t.bindVertexArray(null),o=f,e.setBuffersAndAttributes(t,a,f)),e.setUniforms(a,n.uniforms),r(t,s,f,n.count,n.offset)}}),o.vertexArrayObject&&t.bindVertexArray(null)}return{drawBufferInfo:r,drawObjectList:t}}),t("twgl/textures",["./typedarrays","./utils"],function(e,r){function t(e){R.textureColor=new Uint8Array([255*e[0],255*e[1],255*e[2],255*e[3]])}function n(e){r.copyExistingProperties(e,R),e.textureColor&&t(e.textureColor)}function i(e,r){void 0!==r.colorspaceConversion&&(L.colorspaceConversion=e.getParameter(e.UNPACK_COLORSPACE_CONVERSION_WEBGL),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,r.colorspaceConversion)),void 0!==r.premultiplyAlpha&&(L.premultiplyAlpha=e.getParameter(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.premultiplyAlpha)),void 0!==r.flipY&&(L.flipY=e.getParameter(e.UNPACK_FLIP_Y_WEBGL),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,r.flipY))}function o(e,r){void 0!==r.colorspaceConversion&&e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,L.colorspaceConversion),void 0!==r.premultiplyAlpha&&e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,L.premultiplyAlpha),void 0!==r.flipY&&e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,L.flipY)}function a(e,r,t){var n=t.target||e.TEXTURE_2D;e.bindTexture(n,r),t.min&&e.texParameteri(n,e.TEXTURE_MIN_FILTER,t.min),t.mag&&e.texParameteri(n,e.TEXTURE_MAG_FILTER,t.mag),t.wrap&&(e.texParameteri(n,e.TEXTURE_WRAP_S,t.wrap),e.texParameteri(n,e.TEXTURE_WRAP_T,t.wrap),n===e.TEXTURE_3D&&e.texParameteri(n,e.TEXTURE_WRAP_R,t.wrap)),t.wrapR&&e.texParameteri(n,e.TEXTURE_WRAP_R,t.wrapR),t.wrapS&&e.texParameteri(n,e.TEXTURE_WRAP_S,t.wrapS),t.wrapT&&e.texParameteri(n,e.TEXTURE_WRAP_T,t.wrapT),t.minLod&&e.texParameteri(n,e.TEXTURE_MIN_LOD,t.minLod),t.maxLod&&e.texParameteri(n,e.TEXTURE_MAX_LOD,t.maxLod),t.baseLevel&&e.texParameteri(n,e.TEXTURE_BASE_LEVEL,t.baseLevel),t.maxLevel&&e.texParameteri(n,e.TEXTURE_MAX_LEVEL,t.maxLevel)}function f(e){return e=e||R.textureColor,U(e)?e:new Uint8Array([255*e[0],255*e[1],255*e[2],255*e[3]])}function u(e){return 0===(e&e-1)}function s(e,r,t,n,i){t=t||R.textureOptions;var o=t.target||e.TEXTURE_2D;n=n||t.width,i=i||t.height,e.bindTexture(o,r),u(n)&&u(i)?e.generateMipmap(o):(e.texParameteri(o,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(o,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(o,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE))}function c(e,r){return r=r||{},r.cubeFaceOrder||[e.TEXTURE_CUBE_MAP_POSITIVE_X,e.TEXTURE_CUBE_MAP_NEGATIVE_X,e.TEXTURE_CUBE_MAP_POSITIVE_Y,e.TEXTURE_CUBE_MAP_NEGATIVE_Y,e.TEXTURE_CUBE_MAP_POSITIVE_Z,e.TEXTURE_CUBE_MAP_NEGATIVE_Z]}function l(e,r){var t=c(e,r),n=t.map(function(e,r){return{face:e,ndx:r}});return n.sort(function(e,r){return e.face-r.face}),n}function d(){}function m(e,t,n){function i(){f.removeEventListener("error",o),f.removeEventListener("load",a),
f=null}function o(){var t="couldn't load image: "+e;r.error(t),n(t,f),i()}function a(){n(null,f),i()}n=n||d;var f=new Image;return t=void 0!==t?t:R.crossOrigin,void 0!==t&&(f.crossOrigin=t),f.addEventListener("error",o),f.addEventListener("load",a),f.src=e,f}function p(e,r,t){t=t||R.textureOptions;var n=t.target||e.TEXTURE_2D;if(e.bindTexture(n,r),t.color!==!1){var i=f(t.color);if(n===e.TEXTURE_CUBE_MAP)for(var o=0;o<6;++o)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+o,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,i);else n===e.TEXTURE_3D?e.texImage3D(n,0,e.RGBA,1,1,1,0,e.RGBA,e.UNSIGNED_BYTE,i):e.texImage2D(n,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,i)}}function h(e,t,n,i){i=i||d,n=n||R.textureOptions,p(e,t,n),n=r.shallowCopy(n);var o=m(n.src,n.crossOrigin,function(r,o){r?i(r,t,o):(M(e,t,o,n),i(null,t,o))});return o}function g(e,t,n,a){function f(r){return function(f,u){--v,f?E.push(f):u.width!==u.height?E.push("cubemap face img is not a square: "+u.src):(i(e,n),e.bindTexture(h,t),5===v?c(e).forEach(function(r){e.texImage2D(r,0,s,s,l,u)}):e.texImage2D(r,0,s,s,l,u),o(e,n),e.generateMipmap(h)),0===v&&a(E.length?E:void 0,g,t)}}a=a||d;var u=n.src;if(6!==u.length)throw"there must be 6 urls for a cubemap";var s=n.format||e.RGBA,l=n.type||e.UNSIGNED_BYTE,h=n.target||e.TEXTURE_2D;if(h!==e.TEXTURE_CUBE_MAP)throw"target must be TEXTURE_CUBE_MAP";p(e,t,n),n=r.shallowCopy(n);var g,v=6,E=[],y=c(e,n);g=u.map(function(e,r){return m(e,n.crossOrigin,f(y[r]))})}function v(e){switch(e){case I:case C:return 1;case F:return 2;case S:return 3;case P:return 4;default:throw"unknown type: "+e}}function E(r,t){return U(t)?e.getGLTypeForTypedArray(t):r.UNSIGNED_BYTE}function y(e,r,t,n,i){if(i%1!==0)throw"can't guess dimensions";if(t||n){if(n){if(!t&&(t=i/n,t%1))throw"can't guess dimensions"}else if(n=i/t,n%1)throw"can't guess dimensions"}else{var o=Math.sqrt(i/(r===e.TEXTURE_CUBE_MAP?6:1));o%1===0?(t=o,n=o):(t=i,n=1)}return{width:t,height:n}}function w(r,t,n,a){a=a||R.textureOptions;var f=a.target||r.TEXTURE_2D;r.bindTexture(f,t);var u=a.width,s=a.height,c=a.depth,d=a.format||r.RGBA,m=a.internalFormat||d,p=a.type||E(r,n),h=v(d),g=n.length/h;if(g%1)throw"length wrong size for format: "+B(r,d);var w;if(f===r.TEXTURE_3D)if(u||s||c)!u||s&&c?!s||u&&c?(w=y(r,f,u,s,g/c),u=w.width,s=w.height):(w=y(r,f,u,c,g/s),u=w.width,c=w.height):(w=y(r,f,s,c,g/u),s=w.width,c=w.height);else{var b=Math.cbrt(g);if(b%1!==0)throw"can't guess cube size of array of numElements: "+g;u=b,s=b,c=b}else w=y(r,f,u,s,g),u=w.width,s=w.height;if(U(n))n instanceof Uint8ClampedArray&&(n=new Uint8Array(n.buffer));else{var A=e.getTypedArrayTypeForGLType(p);n=new A(n)}if(r.pixelStorei(r.UNPACK_ALIGNMENT,a.unpackAlignment||1),i(r,a),f===r.TEXTURE_CUBE_MAP){var _=g/6*h;l(r,a).forEach(function(e){var t=_*e.ndx,i=n.subarray(t,t+_);r.texImage2D(e.face,0,m,u,s,0,d,p,i)})}else f===r.TEXTURE_3D?r.texImage3D(f,0,m,u,s,c,0,d,p,n):r.texImage2D(f,0,m,u,s,0,d,p,n);return o(r,a),{width:u,height:s,depth:c}}function b(e,r,t){var n=t.target||e.TEXTURE_2D;e.bindTexture(n,r);var a=t.format||e.RGBA,f=t.internalFormat||a,u=t.type||e.UNSIGNED_BYTE;if(i(e,t),n===e.TEXTURE_CUBE_MAP)for(var s=0;s<6;++s)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+s,0,f,t.width,t.height,0,a,u,null);else n===e.TEXTURE_3D?e.texImage3D(n,0,f,t.width,t.height,t.depth,0,a,u,null):e.texImage2D(n,0,f,t.width,t.height,0,a,u,null);o(e,t)}function A(e,r,t){t=t||d,r=r||R.textureOptions;var n=e.createTexture(),i=r.target||e.TEXTURE_2D,o=r.width||1,f=r.height||1;e.bindTexture(i,n),i===e.TEXTURE_CUBE_MAP&&(e.texParameteri(i,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(i,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE));var u=r.src;if(u)if("function"==typeof u&&(u=u(e,r)),"string"==typeof u)h(e,n,r,t);else if(U(u)||Array.isArray(u)&&("number"==typeof u[0]||Array.isArray(u[0])||U(u[0]))){var c=w(e,n,u,r);o=c.width,f=c.height}else if(Array.isArray(u)&&"string"==typeof u[0])g(e,n,r,t);else{if(!(u instanceof HTMLElement))throw"unsupported src type";M(e,n,u,r),o=u.width,f=u.height}else b(e,n,r);return r.auto!==!1&&s(e,n,r,o,f),a(e,n,r),n}function _(e,r,t,n,i){n=n||t.width,i=i||t.height;var o=t.target||e.TEXTURE_2D;e.bindTexture(o,r);var a,f=t.format||e.RGBA,u=t.src;if(a=u&&(U(u)||Array.isArray(u)&&"number"==typeof u[0])?t.type||E(e,u):t.type||e.UNSIGNED_BYTE,o===e.TEXTURE_CUBE_MAP)for(var s=0;s<6;++s)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+s,0,f,n,i,0,f,a,null);else e.texImage2D(o,0,f,n,i,0,f,a,null)}function T(e){return"string"==typeof e||Array.isArray(e)&&"string"==typeof e[0]}function x(e,r,t){function n(){0===i&&setTimeout(function(){t(o.length?o:void 0,a,f)},0)}t=t||d;var i=0,o=[],a={},f={};return Object.keys(r).forEach(function(t){var u,s=r[t];T(s.src)&&(u=function(e,r,a){f[t]=a,--i,e&&o.push(e),n()},++i),a[t]=A(e,s,u)}),n(),a}var R={textureColor:new Uint8Array([128,192,255,255]),textureOptions:{},crossOrigin:void 0},U=e.isArrayBuffer,I=6406,S=6407,P=6408,C=6409,F=6410,B=function(){function e(e){r||(r={},Object.keys(e).forEach(function(t){"number"==typeof e[t]&&(r[e[t]]=t)}))}var r;return function(t,n){return e(),r[n]||"0x"+n.toString(16)}}(),L={},M=function(){var e=document.createElement("canvas").getContext("2d");return function(r,t,n,f){f=f||R.textureOptions;var u=f.target||r.TEXTURE_2D,c=n.width,d=n.height,m=f.format||r.RGBA,p=f.internalFormat||m,h=f.type||r.UNSIGNED_BYTE;if(i(r,f),r.bindTexture(u,t),u===r.TEXTURE_CUBE_MAP){var g,v,E=n.width,y=n.height;if(E/6===y)g=y,v=[0,0,1,0,2,0,3,0,4,0,5,0];else if(y/6===E)g=E,v=[0,0,0,1,0,2,0,3,0,4,0,5];else if(E/3===y/2)g=E/3,v=[0,0,1,0,2,0,0,1,1,1,2,1];else{if(E/2!==y/3)throw"can't figure out cube map from element: "+(n.src?n.src:n.nodeName);g=E/2,v=[0,0,1,0,0,1,1,1,0,2,1,2]}e.canvas.width=g,e.canvas.height=g,c=g,d=g,l(r,f).forEach(function(t){var i=v[2*t.ndx+0]*g,o=v[2*t.ndx+1]*g;e.drawImage(n,i,o,g,g,0,0,g,g),r.texImage2D(t.face,0,p,m,h,e.canvas)}),e.canvas.width=1,e.canvas.height=1}else if(u===r.TEXTURE_3D){var w=Math.min(n.width,n.height),b=Math.max(n.width,n.height),A=b/w;if(A%1!==0)throw"can not compute 3D dimensions of element";var _=n.width===b?1:0,T=n.height===b?1:0;r.texImage3D(u,0,p,w,w,w,0,m,h,null),e.canvas.width=w,e.canvas.height=w;for(var x=0;x<A;++x){var U=x*w*_,I=x*w*T,S=w,P=w,C=0,F=0,B=w,L=w;e.drawImage(n,U,I,S,P,C,F,B,L),r.texSubImage3D(u,0,0,0,x,m,h,e.canvas)}e.canvas.width=0,e.canvas.height=0}else r.texImage2D(u,0,p,m,h,n);o(r,f),f.auto!==!1&&s(r,t,f,c,d),a(r,t,f)}}();return{setDefaults_:n,createTexture:A,setEmptyTexture:b,setTextureFromArray:w,loadTextureFromUrl:h,setTextureFromElement:M,setTextureFilteringForSize:s,setTextureParameters:a,setDefaultTextureColor:t,createTextures:x,resizeTexture:_,getNumComponentsForFormat:v}}),t("twgl/framebuffers",["./textures","./utils"],function(e,r){function t(e){return T[e]}function n(e){return x[e]}function i(i,o,a,f){var u=i.FRAMEBUFFER,s=i.createFramebuffer();i.bindFramebuffer(u,s),a=a||i.drawingBufferWidth,f=f||i.drawingBufferHeight,o=o||_;var c=0,l={framebuffer:s,attachments:[],width:a,height:f};return o.forEach(function(o){var s=o.attachment,d=o.format,m=t(d);if(m||(m=v+c++),!s)if(n(d))s=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,s),i.renderbufferStorage(i.RENDERBUFFER,d,a,f);else{var p=r.shallowCopy(o);p.width=a,p.height=f,void 0===p.auto&&(p.auto=!1,p.min=p.min||i.LINEAR,p.mag=p.mag||i.LINEAR,p.wrapS=p.wrapS||p.wrap||i.CLAMP_TO_EDGE,p.wrapT=p.wrapT||p.wrap||i.CLAMP_TO_EDGE),s=e.createTexture(i,p)}if(s instanceof WebGLRenderbuffer)i.framebufferRenderbuffer(u,m,i.RENDERBUFFER,s);else{if(!(s instanceof WebGLTexture))throw"unknown attachment type";i.framebufferTexture2D(u,m,o.texTarget||i.TEXTURE_2D,s,o.level||0)}l.attachments.push(s)}),l}function o(r,t,n,i,o){i=i||r.drawingBufferWidth,o=o||r.drawingBufferHeight,t.width=i,t.height=o,n=n||_,n.forEach(function(n,a){var f=t.attachments[a],u=n.format;if(f instanceof WebGLRenderbuffer)r.bindRenderbuffer(r.RENDERBUFFER,f),r.renderbufferStorage(r.RENDERBUFFER,u,i,o);else{if(!(f instanceof WebGLTexture))throw"unknown attachment type";e.resizeTexture(r,f,n,i,o)}})}function a(e,r,t){t=t||e.FRAMEBUFFER,r?(e.bindFramebuffer(t,r.framebuffer),e.viewport(0,0,r.width,r.height)):(e.bindFramebuffer(t,null),e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight))}var f=5121,u=6402,s=6408,c=32854,l=32855,d=36194,m=33189,p=6401,h=36168,g=34041,v=36064,E=36096,y=36128,w=33306,b=33071,A=9729,_=[{format:s,type:f,min:A,wrap:b},{format:g}],T={};T[g]=w,T[p]=y,T[h]=y,T[u]=E,T[m]=E;var x={};return x[c]=!0,x[l]=!0,x[d]=!0,x[g]=!0,x[m]=!0,x[p]=!0,x[h]=!0,{bindFramebufferInfo:a,createFramebufferInfo:i,resizeFramebufferInfo:o}}),t("twgl/twgl",["./attributes","./draw","./framebuffers","./programs","./textures","./typedarrays","./utils"],function(e,r,t,n,i,o,a){function f(r){a.copyExistingProperties(r,g),e.setDefaults_(r),i.setDefaults_(r)}function u(e){if(e&&g.enableVertexArrayObjects&&a.isWebGL1(e)){var r=e.getExtension("OES_vertex_array_object");r&&(e.createVertexArray=function(){return r.createVertexArrayOES()},e.deleteVertexArray=function(e){r.deleteVertexArrayOES(e)},e.isVertexArray=function(e){return r.isVertexArrayOES(e)},e.bindVertexArray=function(e){r.bindVertexArrayOES(e)},e.VERTEX_ARRAY_BINDING=r.VERTEX_ARRAY_BINDING_OES)}}function s(e,r){for(var t=["webgl","experimental-webgl"],n=null,i=0;i<t.length;++i){try{n=e.getContext(t[i],r)}catch(e){}if(n)break}return n}function c(e,r){var t=s(e,r);return u(t),t}function l(e,r){for(var t=["webgl2","experimental-webgl2","webgl","experimental-webgl"],n=null,i=0;i<t.length;++i){try{n=e.getContext(t[i],r)}catch(e){}if(n)break}return n}function d(e,r){var t=l(e,r);return u(t),t}function m(e,r){r=r||1,r=Math.max(1,r);var t=e.clientWidth*r|0,n=e.clientHeight*r|0;return(e.width!==t||e.height!==n)&&(e.width=t,e.height=n,!0)}function p(e){return"_"!==e[e.length-1]}function h(e,r){return Object.keys(e).filter(p).forEach(function(t){r[t]=e[t]}),r}var g={enableVertexArrayObjects:!0},v={getContext:d,getWebGLContext:c,isWebGL1:a.isWebGL1,isWebGL2:a.isWebGL2,resizeCanvasToDisplaySize:m,setDefaults:f},E={attributes:e,draw:r,framebuffers:t,programs:n,textures:i,typedArrays:o};return Object.keys(E).forEach(function(e){var r=E[e];h(r,v),v[e]=h(r,{})}),v}),t("main",["twgl/twgl"],function(e){return e}),r(["main"],function(e){return e},void 0,!0),t("build/js/twgl-includer",function(){}),r("main")})},function(e,r){(function(r){e.exports=r}).call(r,{})},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_RESULT__=function(){"use strict";var Clubber=function(config){function freq2midi(freq){for(var r=1.05946309436,lala=523.251,notetest=eval(freq),ref=lala,hauteur=1,octave=4,alteration,supinf=0,compteur=0,hautnb=1,noteton,ref1=0,ref2=0,temp,flag=0,nmidi=72,tableau=new Array;notetest<ref;)ref=Math.floor(1e3*ref/r)/1e3,compteur+=1,supinf=-1,flag=1,ref1=ref;for(;notetest>ref;)ref=Math.floor(1e3*ref*r)/1e3,compteur-=1,supinf=1,ref2=ref;for(Math.abs(notetest-ref1)<Math.abs(notetest-ref2)?(supinf=-1,compteur+=1):1==flag&&(supinf=-1),0==ref1&&(ref1=Math.floor(1e3*ref/r)/1e3,Math.abs(notetest-ref1)<Math.abs(notetest-ref2)&&(compteur+=1,supinf=1)),compteur=Math.abs(compteur);0!=compteur;)(1==hautnb&&supinf==-1||12==hautnb&&1==supinf)&&(octave+=eval(supinf),1==supinf&&(hautnb=0),supinf==-1&&(hautnb=13)),hautnb+=supinf,nmidi+=supinf,compteur-=1;return nmidi}config||(config={}),this.audioCtx=new(window.AudioContext||window.webkitAudioContext),this.analyser=this.audioCtx.createAnalyser(),this.analyser.fftSize=config.size||2048,this.bufferLength=this.analyser.frequencyBinCount,this.thresholdFactor=config.thresholdFactor||.66,config.mute||this.analyser.connect(this.audioCtx.destination),this.data=new Uint8Array(this.bufferLength),this.keys=new Uint8Array(this.bufferLength),this.notes=new Uint16Array(160),this.thresholds=new Uint8Array(160),this.weights=new Uint8Array(160);for(var i=0,inc=this.audioCtx.sampleRate/2/this.bufferLength;i<this.bufferLength;i++){var freq=(i+.5)*inc,key=freq2midi(freq);this.keys[i]=key,this.weights[key]++}this.count=0};return Clubber.prototype.listen=function(e){this.el=e,this.source&&this.source.disconnect(this.analyser),this.source=this.audioCtx.createMediaElementSource(e),this.source.connect(this.analyser)},Clubber.prototype.band=function(e){var r={from:1,to:128,snap:.66,smooth:[.33,.33,.33,.33],step:1e3/60};if(e)for(var t in r)e[t]||(e[t]=r[t]);else e=r;var n={count:0,scope:this,config:e,data:new Float32Array(4)};return function(e){function r(e,r,t){return e=e?e:0,t=Math.min(t,n.config.snap),t<0&&(t=e>r?Math.abs(n.config.snap):-t),t*e+(1-t)*r}if(e)for(var t in n.config)void 0!==e[t]&&(n.config[t]=e[t]);if(e=n.config,n.time>n.scope.time)return n.data;for(var i=e.smooth,o=n.data,a=-1,f=0,u=0,s=0,c=0,l=0,d=e.from;d<e.to;d++){var m=n.scope.notes[d];m>n.scope.thresholds[d]&&(s+=m-128,c+=d%12,u+=d,l++,m>f&&(a=d,f=m))}void 0===n.time&&(n.time=n.scope.time);for(var p=n.time,h=n.config.step,g=n.scope.time+h;p<=g;p+=h)o[0]=r(a%12/12,o[0],i[0]),o[1]=r((l?c/l:0)/12,o[1],i[1]),o[2]=r(((l?u/l:0)-e.from)/(e.to-e.from),o[2],i[2]),o[3]=r((l?s/l:0)/128,o[3],i[3]);return n.time=p,n.count=n.scope.count,o}},Clubber.prototype.update=function(e,r){this.cache;r||(this.analyser.getByteFrequencyData(this.data),r=r);for(var t=0;t<this.notes.length;t++)this.notes[t]=0;for(t=0;t<this.keys.length;t++)this.notes[this.keys[t]]+=this.data[t];for(t=0;t<this.notes.length;t++){this.notes[t]/=this.weights[t];var n=this.thresholdFactor;this.thresholds[t]=128+Math.max(Math.min(1,Math.max(n,0))*Math.max(0,this.notes[t]-128),this.thresholds[t]),this.thresholds[t]>128&&this.thresholds[t]--}this.time=void 0!==e?parseFloat(e):window.performance.now(),this.count++},Clubber}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},function(e,r){e.exports="// by Andrea Bovo, spleennooname / 2016\r\n// Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License.\r\n\r\n#ifdef GL_ES\r\nprecision mediump float;\r\n#endif\r\n\r\nvarying vec2 vUv;\r\n\r\nuniform float iGlobalTime;\r\nuniform vec2 iResolution;\r\n\r\nuniform vec4 iMusicSub;\r\nuniform vec4 iMusicLow;\r\nuniform vec4 iMusicMid;\r\nuniform vec4 iMusicHigh;\r\n\r\n//\r\n\r\n#define time iGlobalTime\r\n#define resolution iResolution.xy\r\n\r\n#define N_WAVES 3\r\n#define GREY 220./255.\r\n\r\n//noise\r\nfloat rand(float n){\r\n    return fract(sin(n) * 43758.5453123);\r\n}\r\n\r\nfloat noise(float p){\r\n    float fl = floor(p);\r\n    float fc = fract(p);\r\n    return mix(rand(fl), rand(fl + 1.0), fc);\r\n}\r\n\r\nfloat gauss(float s, float x){\r\n    return (0.85)*exp(-x*x/(2.*s*s));\r\n}\r\n\r\nfloat blur(float dist, float width, float blur, float intens){   \r\n    dist = max( abs(dist)-width, 0.);\r\n    float b = gauss(0.02 + width *10.*blur, dist);\r\n    return b*intens;\r\n}\r\n\r\nfloat d2y2(float d, float i){\r\n    float b = 0.75*i+0.0001;\r\n    return blur(d , 0.005, b, 0.45);\r\n}\r\n\r\nfloat f(float x){\r\n    return blur(0.5*x, 0.03, 0.04+0.5, 1.);\r\n}\r\n\r\nfloat wave(float x, int i, vec4 sub, vec4 low, vec4 mid, vec4 high){\r\n\r\n\t//0 the note where the highest energy was seen, \r\n\t//1 the average note for the whole band, \r\n\t//2 the octave (bass vs treble) and \r\n\t//3 the average energy of all triggered notes.\r\n    \r\n    float i_f = float(i);\r\n\r\n    \r\n   \r\n    float y = ( mix(0., +.75,  high[1]*.75 + high[0] + mid[0]) - .25*i_f )*sin( x*1.45  + .55*time- i_f * mix(-.5, +.5, sub[1] + mid[0] + low[0] + high[3]) );\r\n\r\n    return y;\r\n}\r\n\r\nvoid main(void) {\r\n    \r\n    vec2 uv = (gl_FragCoord.xy / resolution - vec2(0.5)) * vec2(resolution.x / resolution.y, 1.0);\r\n\r\n    uv.y *= 1.5;\r\n    uv.x *= 1.75;\r\n\t\r\n    vec3 col = vec3(0.);\r\n    \r\n    for(int i = 0; i<N_WAVES; ++i){\r\n        \r\n        float i_f = float(i)*0.5 + 1.;\r\n\r\n\r\n        float y = d2y2( distance( 2.*uv.y, wave(uv.x, i, iMusicSub, iMusicLow, iMusicMid, iMusicHigh) ), i_f );\r\n        col += y;\r\n        \r\n    }\r\n    \r\n    gl_FragColor = vec4( GREY - col, 1.0);\r\n}"}]);